# syntax=docker/dockerfile:1
# escape=`

FROM golang:1.18-alpine
WORKDIR /app
COPY go.mod ./
COPY go.sum ./

RUN go mod download
COPY . .
RUN go build -o /auth-service

ENV GSUI_PORT=3000

ENV PORT=8000
ENV ADMIN_APIKEY=admin
ENV CORS="http://localhost:4200"
ENV REFRESH_TOKEN_EXPIRATION="1460 h"
ENV JWT_EXPIRATION="5 m"
ENV ROOT_URL="http://localhost:8000"
ENV GOOGLE_CLIENT_ID=736892386107-pik68apgj7acgdigkutg25c075qat9nu.apps.googleusercontent.com
ENV GOOGLE_SECRET=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

ENV IDP_URL="https://samltest.id/saml/idp"
ENV CERT="-----BEGIN CERTIFICATE-----\nMIIDDzCCAfegAwIBAgIUJi4pktZPSDOHRFl41RhT75A0MikwDQYJKoZIhvcNAQEL\nBQAwFzEVMBMGA1UEAwwMZ3NzZXJ2aWNlLmV1MB4XDTIyMDMxNzEwMDYyMloXDTIz\nMDMxNzEwMDYyMlowFzEVMBMGA1UEAwwMZ3NzZXJ2aWNlLmV1MIIBIjANBgkqhkiG\n9w0BAQEFAAOCAQ8AMIIBCgKCAQEAztbOSv/BAG2M7as2fKfkmzkfCk5uA2Us9R22\nxoU+pLPnCasdH7O6rLKOLsGYdBlgJ/Qo2ngf6LvK5gu6xm6DFcGgcXvDX21eJn+h\n8ZaJ5rtMxKprmHsk5PQsPKA2z/FO7pqc0ALqHWC0i0GEHnMsEtAkTp3PMw9rrO4u\nV4YRjXLRqop8Vn5VtXHfMuJBpyQEpfqs2xroewdpmmfg4rZ2opKux6TsbWyGXdM8\nWt964PN/LzEdH7SuijWVo/sXRuKnFxCRQ17rMViHfxTcMbn0ULSCC7icEnhCthDp\nKbXa+l1PQMT6H/vrF1kqjfI0gbIPmSLuQMAJgJX74LKnL2b5WQIDAQABo1MwUTAd\nBgNVHQ4EFgQUT/IqNHYvW2RIeOBOxOdGas7wRS0wHwYDVR0jBBgwFoAUT/IqNHYv\nW2RIeOBOxOdGas7wRS0wDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOC\nAQEAU0fzzTe2fU5/bPGflTeJYLDYqwBLJAGgWAslNuFc25jfjF/jDhpTUzdQMe4+\nqJYMCwpVLpVENwObQ1Z0sucEo6pAkgHPk2YPemFD4uPJ167kcfoGS6kxx/7Qyn6d\nXzJ/2Xc2mHjj7kEhSNQCisE3U+joFzCkHZ9KJpWOYr2GHa+Az8jlnZCeiQt4heIe\ni+e6e5ZtI0W8AJ0JZC10f6yF10yKtbagG2HudPpWCx7Yht8BTaLAafGqkG+RuZUT\nNob5mRme0T2t7Je+qhgCSvPUYe0gheVWAQLHkRI0ieEsFusTuweTDM9XSqGUdFf6\nBi2EcOR9wauitTtV0pb5W81P9Q==\n-----END CERTIFICATE-----\n"
ENV CERT_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDO1s5K/8EAbYzt\nqzZ8p+SbOR8KTm4DZSz1HbbGhT6ks+cJqx0fs7qsso4uwZh0GWAn9CjaeB/ou8rm\nC7rGboMVwaBxe8NfbV4mf6Hxlonmu0zEqmuYeyTk9Cw8oDbP8U7umpzQAuodYLSL\nQYQecywS0CROnc8zD2us7i5XhhGNctGqinxWflW1cd8y4kGnJASl+qzbGuh7B2ma\nZ+Ditnaikq7HpOxtbIZd0zxa33rg838vMR0ftK6KNZWj+xdG4qcXEJFDXusxWId/\nFNwxufRQtIILuJwSeEK2EOkptdr6XU9AxPof++sXWSqN8jSBsg+ZIu5AwAmAlfvg\nsqcvZvlZAgMBAAECggEAFOiwB/Lcrs9kPK5fHrDWMj7O/Xq6MkurBMhRLrZPg9TP\n2TFcC1Ve3JBcQSu+3pWmG8PZ0WPtTdiWBTVQVzjatXtSXcZ2FJJ4vwmN9F8UZ6et\ndgAISmzAaQip5CMKB3FMWmB0065HvlqFRcKEuZNI9EnoMa5QQMghSWT2eFCMO7Ed\n67ZaMtdkhAuNQ/Bs8yTmygGGZGn3aNibvVKnP0IVe7ntL167eKeBDOVt8D/jj5Bd\n4HRv14wCR7zSQvA/8O4soRssRXw8ohTHJ3zz87u6/z/aStAZDYkCqAzKaMra4+xt\n7AU+RcF2I33ZwaCtUzjOxRFlfa9JiYrMB6FiJy1lJQKBgQD/dV6lZE0/BGTcQV7K\nPHkoeCso8uzbfnavTZ8MNlum25AxLUeiTz4ROUtULoIG4T8BwPIJ34Js7OXvSK13\nPf7vLKGCiJEl9M8FGUK/EmopSmnmP9xUHyjNOID/hsp9eG7QxTft4+uCv9mI2M4p\niwzG0wtxdLIcuLAPvQFVuKc2ewKBgQDPRw09LxtH8U8deJ2/Oq4vkiaFQwMgeBn/\nljoRJpCmNNoJUbi4seius/z/QTMSGjdGQemWtbX97KNi0hFFkWfP5rtcJFBprrT4\n0tzql2IUtvdalRcjI6YCLo/Haof91vgfLN7XLgwpPfT58kFB9EiLgzJmJmgk7v2M\nhhi7NDnROwKBgQC0+RUf3jrLFfXOA5F/e+/pN5h73fzmUmUKM9ck861iO9GexREm\nbzTtRsWS0Y/UB+Z2+5V8YRcoy3rpVXduLkFYdynEK7OITDIMzqR2cDk9HzZ+o2cX\nQSvKlujsHTV+Rb9brxu8L+c8LWWSiOUkkRlwETreGWnE5yHzRFaZv8LV2QKBgQCz\nHploOB8BKpzNwP/A0zrXTRsQqfo3wtHktrNzQrpZhu6sgvx4TvXekxeclYFGsXT2\nt9reLCUbS7Vdnl7imWb2mFNsqsz6pskpBT93Ul6lu/9BPfmCmjnJROdm0r62M2Cz\nwBjKJrbHpQzgOeL+1dUjCrsw3xu8XvKozvDsRZN5JQKBgCPb/xhrcJNziB0j0W7L\nfDDmUMOhb6cXMwF7c/WRy96CSttZOWOrWilYdb29P5hzDp3g4JwsURivGucz+oFo\n+C562BQ+tXn0vhBcdGg6Ap/8TCTUrUxheIOnC4kxbrNuCbHQ9bjQY1zv5RlrMGZ+\ne8DQhW3Koq4VFyXXiT+G1neU\n-----END PRIVATE KEY-----\n"
ENV RS256_PRIV=
ENV RS256_PUB=

CMD ["/auth-service"]
