{"version":3,"file":"main.js","mappings":";;;;;;;;;;;;;;;;;;;AAqBuD;AACsB;AACH;AACS;AACG;;;AAEtF,MAAM,MAAM,GAAW;IACrB,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,sFAAkB,EAAE;IAChD,EAAE,IAAI,EAAE,eAAe,EAAE,SAAS,EAAE,+FAAqB,EAAE;IAC3D,EAAE,IAAI,EAAE,kBAAkB,EAAE,SAAS,EAAE,4FAAoB,EAAE;IAC7D,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,mFAAiB,EAAE;IAC9C,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,mFAAiB,EAAE;CAC7C,CAAC;AAMK,MAAM,gBAAgB;;gFAAhB,gBAAgB;6GAAhB,gBAAgB;iHAHlB,CAAC,iEAAoB,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,EAChD,yDAAY;mIAEX,gBAAgB,oFAFjB,yDAAY;;;;;;;;;;;;;;;;;;;;;AChBqB;AACR;;;;AAS9B,MAAM,YAAY;IAMvB,YACU,MAAuB;QAAvB,WAAM,GAAN,MAAM,CAAiB;QANjC,UAAK,GAAG,UAAU,CAAC;QASjB,IAAI,CAAC,SAAS,GAAG,wCAAE,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAClD,mDAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAmB,EAAC,CAAC,CAC1F,CAAC;QAEF,IAAI,CAAC,YAAY,GAAG;YAClB,OAAO,EAAE,CAAC,EAAU,EAAE,EAAE;gBACtB,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAChC,IAAI,EAAE,KAAK,SAAS,EAAE;oBAAE,OAAO,uCAAK,CAAC;iBAAE;gBACvC,OAAO,wCAAE,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE,CAAC,QAAQ,EAAkB,CAAC,CAAC;YACxE,CAAC;SACF;IACH,CAAC;;wEArBU,YAAY;0GAAZ,YAAY;QCZxB,2EAA+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACE0B;AACF;AACX;AACW;AAE+B;AAExC;AACwB;AACT;AACyD;AAC5B;AACZ;AACb;AACc;AACH;AACH;AACY;AACH;;AA6B5E,MAAM,SAAS;;kEAAT,SAAS;uGAAT,SAAS,cAFR,wDAAY;4GAHb;QACT,gGAAmB;KACpB,YARQ;YACP,iEAAgB;YAChB,qEAAa;YACb,wDAAW;YACX,mEAAgB;SACjB;oIAMU,SAAS,mBAxBlB,wDAAY;QACZ,gFAAe;QACf,gIAAyB;QACzB,uEAAY;QACZ,oGAAqB;QACrB,wFAAiB;QACjB,2EAAe;QACf,yFAAkB;QAClB,uFAAkB;QAClB,oFAAiB;QACjB,gGAAqB;QACrB,6FAAoB,aAGpB,iEAAgB;QAChB,qEAAa;QACb,wDAAW;QACX,mEAAgB;;;;;;;;;;;;;;;;;;ACvC+D;;;;AAO5E,MAAM,eAAgB,SAAQ,2FAAsB;IAWzD,YAC8E,SAA6B,EACzG,KAAiB;QAEjB,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;QAHiD,cAAS,GAAT,SAAS,CAAoB;QAV3G,kBAAa,GAAG;YACd,KAAK,EAAE,SAAS;YAChB,QAAQ,EAAE,YAAY;YACtB,OAAO,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE;SAC5B,CAAC,CAAC,mDAAmD;QACtD,SAAI,GAAW,iDAAiD,CAAC,CAAC,kBAAkB;IASpF,CAAC;IAED,CAAC,CAAC,CAAM;QACN,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;IACxB,CAAC;;8EApBU,eAAe,kEAYhB,+HAA0D;6GAZzD,eAAe;QCT5B,+EAAuC;;;;;;;;;;;;;;;;;ACpBvC;;;;;;;;;;;;;;;;;;GAkBG;AAEuD;;AAMnD,MAAe,sBAAsB;IACxC,YAAmB,eAA4B;QAA5B,oBAAe,GAAf,eAAe,CAAa;IAE/C,CAAC;IAED,kBAAkB,CAAC,IAAY,EAAE,GAAW,EAAE,KAAa,EAAE,MAAc;QACvE,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAC5D,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;QAC1D,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;QAC9D,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;IACpE,CAAC;IAED,aAAa,CAAC,OAAgB;QAC1B,IAAI,OAAO,EAAE;YACT,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;SAC3C;aAAM;YACH,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;SAC/C;IACL,CAAC;IAED,SAAS,CAAC,KAAa;QACnB,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;IAC9C,CAAC;IAEO,cAAc,CAAC,KAAa;QAChC,OAAO,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;IACrC,CAAC;;4FA1BiB,sBAAsB,kEACJ,WAAW;oHAD7B,sBAAsB;AA6B5C,WAAiB,sBAAsB;IACnC,MAAM,8BAA8B,GAAG,uBAAuB,CAAC;IAClD,0DAAmC,GAAG,IAAI,yDAAc,CAAqB,8BAA8B,CAAC,CAAC;AAC9H,CAAC,EAHgB,sBAAsB,KAAtB,sBAAsB,QAGtC;;;;;;;;;;;;;;;;;;;;;;;;;;AC1DD;;;;;;;;;;;;;;;;;;GAkBG;AAEuK;AAMnJ;AAEQ;AACiB;AAEgB;AACoB;AAC7B;AACgC;;;;;AAShF,MAAM,yBAAyB;IA2CpC,YAAoB,OAAuB,EACjC,MAA+B,EAC/B,4BAAiD;QAFvC,YAAO,GAAP,OAAO,CAAgB;QACjC,WAAM,GAAN,MAAM,CAAyB;QAC/B,iCAA4B,GAA5B,4BAA4B,CAAqB;QA5CjD,UAAK,GAAG,IAAI,uDAAY,EAA6B,CAAC;QAIxD,qBAAgB,GAAG,IAAI,GAAG,EAA4D,CAAC;QACvF,oCAA+B,GAAY,IAAI,OAAO,EAAE,CAAC;QAEzD,4CAAuC,GAC7C,CAAC,SAA6B,EAAE,UAAuC,EAAE,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;QAC3H,8CAAyC,GAC/C,CAAC,SAA6B,EAAE,EAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC;QAQxE,0BAAqB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAE7D,YAAO,GAAG,IAAI,yCAAO,EAAE,CAAC;QAEzB,gBAAW,GAAG,IAAI,yCAAO,EAAE,CAAC;QAC5B,gBAAW,GAAG,IAAI,yCAAO,EAAE,CAAC;QAC5B,kBAAa,GAAG,IAAI,yCAAO,EAAiB,EAAC,yBAAyB;QAErE,kBAAa,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAC3C,mDAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAC5B,yDAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CACxB,CAAC;QAEM,kBAAa,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAC3C,mDAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAC5B,yDAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CACxB,CAAC;QAEM,oBAAe,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAC/C,mDAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAC1B,mDAAG,CAAC,CAAC,CAAC,IAAI,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,EAC/C,yDAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CACxB,CAAC;QAMA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC;QAEtD,IAAI,CAAC,4BAA4B,CAAC,qBAAqB,CAAC,iEAAiB,EAAE,4DAAY,CAAC,CAAC;QACzF,IAAI,CAAC,4BAA4B,CAAC,qBAAqB,CAAC,iGAA2B,EAAE,4FAAsB,CAAC,CAAC;QAC7G,IAAI,CAAC,4BAA4B,CAAC,qBAAqB,CAAC,8FAA0B,EAAE,yFAAqB,CAAC,CAAC;QAC3G,IAAI,CAAC,4BAA4B,CAAC,qBAAqB,CAAC,0EAAoB,EAAE,qEAAe,CAAC,CAAC;QAE/F,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC;QAC/B,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC;QAC/B,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAE/D,CAAC;IA1CD,IAAI,YAAY,KAAK,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;IACjD,IAAI,uBAAuB,KAAK,OAAO,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,CAAC;IA2CxE,eAAe;QACb,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,UAAU,EAAE,CAAC;YAElB,UAAU,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;YAElE,IAAI,CAAC,GAAG,CAAC,8FAA0B,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;YAEtF,IAAI,CAAC,GAAG,CAAC,8FAA0B,EAAE,EAAE,IAAI,EAAE,YAAY,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,CAAC;YACpG,IAAI,CAAC,GAAG,CAAC,8FAA0B,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;YAC1F,uGAAuG;YACvG,uGAAuG;YAEvG,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,EAAE,EAAE,IAAI,CAAC,CAAC;YAClD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAClC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxB,CAAC,EAAE,CAAC,CAAC,CAAC;IAER,CAAC;IAEO,UAAU;QAChB,MAAM,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;QAC5C,MAAM,EAAE,GAAG,oEAAyB,CAAC,GAAG,CAAC,CAAC;QAC1C,YAAY,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;IACjD,CAAC;IAEO,UAAU;QAChB,MAAM,EAAE,GAAiB,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;QACvE,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;IACpC,CAAC;IAED,WAAW;QACT,UAAU,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACrE,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;IAC/B,CAAC;IAEO,uBAAuB,KAAK,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IAEhE,kBAAkB;;QAChB,MAAM,EAAE,WAAW,EAAE,YAAY,EAAE,GAAG,UAAI,CAAC,MAAM,CAAC,aAAa,CAAC,aAAa,mCAAI,EAAE,YAAY,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC;QACrH,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC;IAC1C,CAAC;IAED,KAAK;QACH,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;IAC7B,CAAC;IAED,GAAG,CAAC,aAAqB,EAAE,MAA+B;QACxD,MAAM,qBAAqB,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,aAAa,EAAE,SAAS,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,wBAAwB;QAC/H,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;QAC3E,IAAI,YAAY,KAAK,SAAS,EAAE;YAC9B,MAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAC;SAC1D;QAED,IAAI,aAAa,KAAK,8FAA0B,EAAE,EAAE,iCAAiC;YACnF,MAAM,CAAC,GAAG,YAAY,CAAC,QAAiC,CAAC;YACzD,CAAC,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;YACrB,CAAC,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;YACvB,CAAC,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;SACtB;QAED,IAAI,aAAa,KAAK,iEAAiB,EAAE;YACvC,MAAM,CAAC,GAAG,YAAY,CAAC,QAAwB,CAAC;YAChD,CAAC,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC,4EAA4E;SACjH;QAED,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,OAAO,YAAY,CAAC;IACtB,CAAC;IAED,UAAU;QACR,IAAI,CAAC,aAAa,GAAG,IAAI,wDAAY,CACnC,IAAI,CAAC,oBAAoB,EACzB,IAAI,CAAC,uCAAuC,EAC5C,IAAI,CAAC,yCAAyC,CAC/C,CAAC;QACF,IAAI,CAAC,aAAa,CAAC,yBAAyB,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,+BAA+B,CAAC,KAAK,CAAC,CAAC;QAEtG,IAAI,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE;YAClC,IAAI,CAAC,aAAa,CAAC,0BAA0B,EAAE,CAAC;SACjD;IACH,CAAC;IAED,OAAO,CAAC,KAAa,EAAE,MAAc;QACnC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC;IAC3C,CAAC;IAED,eAAe,CAAC,SAA6B;QAC3C,OAAO,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IAC9C,CAAC;IAEO,wBAAwB,CAAC,SAA6B,EAAE,UAAuC;QACrG,MAAM,aAAa,GAAG,UAAU,CAAC,aAAa,CAAC;QAC/C,MAAM,YAAY,GAAG,IAAI,CAAC,4BAA4B,CAAC,eAAe,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;QACjG,MAAM,SAAS,GAAG,YAAY,CAAC,QAAQ,CAAC;QAExC,qDAAqD;QACrD,mDAAmD;QACnD,0FAA0F;QAE1F,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;QAEnD,SAAS,CAAC,2BAA2B,GAAG,CAAC,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,CAAC,IAAI,CAAC,0CAA0C,CAAC,SAAS,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QAChJ,SAAS,CAAC,oCAAoC,GAAG,CAAC,SAAS,EAAE,OAAO,EAAE,EAAE,CAAC,IAAI,CAAC,4CAA4C,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC/I,SAAS,CAAC,gCAAgC,GAAG,CAAC,SAAS,EAAE,aAAa,EAAE,aAAa,EAAE,EAAE,CAAC,IAAI,CAAC,+CAA+C,CAAC,SAAS,EAAE,aAAa,EAAE,aAAa,CAAC,CAAC;QAExL,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;QAC/C,MAAM,oBAAoB,GAAG,SAAS,CAAC,eAAe,CAAC;QACvD,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC;QAG5D,OAAO;YACL,SAAS;YACT,OAAO,EAAE,IAAI;SACd;IACH,CAAC;IAEO,0BAA0B,CAAC,SAA6B;QAC9D,MAAM,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC1D,IAAI,YAAY,KAAK,SAAS,EAAE;YAC9B,MAAM,IAAI,KAAK,CAAC,iDAAiD,CAAC,CAAC;SACpE;QACD,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAExC,MAAM,QAAQ,GAAG,YAAY,CAAC,QAAQ,CAAC;QAEvC,MAAM,SAAS,GAAG,YAAY,CAAC,QAAQ,CAAC;QACxC,MAAM,oBAAoB,GAAG,SAAS,CAAC,eAAe,CAAC;QACvD,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC;QAC5D,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QAElC,YAAY,CAAC,OAAO,EAAE,CAAC;IACzB,CAAC;IAEO,+BAA+B,CAAC,KAAa;QACnD,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC,oBAAoB,CAAC,qBAAqB,EAAE,CAAC;IAC3F,CAAC;IAEO,0CAA0C,CAAC,SAA6B,EAAE,KAAa,EAAE,MAAc;QAC7G,MAAM,2BAA2B,GAAG,SAAS,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC;QAC9E,MAAM,IAAI,GAAG,2BAA2B,CAAC,IAAI,GAAG,IAAI,CAAC,+BAA+B,CAAC,IAAI,CAAC;QAC1F,MAAM,GAAG,GAAG,2BAA2B,CAAC,GAAG,GAAG,IAAI,CAAC,+BAA+B,CAAC,GAAG,CAAC;QAEvF,MAAM,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC1D,IAAI,YAAY,KAAK,SAAS,EAAE;YAC9B,MAAM,IAAI,KAAK,CAAC,oEAAoE,CAAC,CAAC;SACvF;QACD,MAAM,SAAS,GAAG,YAAY,CAAC,QAAQ,CAAC;QACxC,SAAS,CAAC,kBAAkB,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;IACzD,CAAC;IAEO,4CAA4C,CAAC,SAA6B,EAAE,OAAgB;QAClG,MAAM,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC1D,IAAI,YAAY,KAAK,SAAS,EAAE;YAC9B,MAAM,IAAI,KAAK,CAAC,sEAAsE,CAAC,CAAC;SACzF;QACD,MAAM,SAAS,GAAG,YAAY,CAAC,QAAQ,CAAC;QACxC,SAAS,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;IACnC,CAAC;IAEO,+CAA+C,CAAC,SAA6B,EAAE,aAA4B,EAAE,aAAqB;QACxI,MAAM,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC1D,IAAI,YAAY,KAAK,SAAS,EAAE;YAC9B,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;SAC5F;QACD,MAAM,SAAS,GAAG,YAAY,CAAC,QAAQ,CAAC;QACxC,SAAS,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;IACrC,CAAC;;kGAnOU,yBAAyB;uHAAzB,yBAAyB;0EAaS,2DAAgB;;;;;QAhBlD,iNAAmD;;;;;;;;;;;;;;;;;;;;;;ACxChE;;;;;;;;;;;;;;;;;;GAkBG;AAEkG;AAExC;AACoB;AAC7B;AACgC;AAChB;;AAK7D,MAAM,mBAAmB;IAU9B,YACU,wBAAkD;QAAlD,6BAAwB,GAAxB,wBAAwB,CAA0B;QAVpD,sBAAiB,GAAG,IAAI,GAAG,EAAwC;QAEnE,wBAAmB,GAAG;YAC5B,4DAAY;YACZ,4FAAsB;YACtB,yFAAqB;YACrB,qEAAe;SAChB;QAKC,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;IACjF,CAAC;IAED,qBAAqB,CAAC,IAAY,EAAE,aAA2C;QAC7E,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;IAClD,CAAC;IAED,+BAA+B;QAC7B,MAAM,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;QAC1C,MAAM,MAAM,GAAG,IAAI,KAAK,CAAS,KAAK,CAAC,CAAC;QACxC,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,KAAK,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC/C,MAAM,CAAC,GAAG,EAAE,CAAC,GAAG,GAAG,CAAC;SACrB;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,eAAe,CAAC,sBAAiC,EAAE,SAA6B;QAC9E,MAAM,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,sBAAgC,CAAC,CAAC;QACnF,IAAI,aAAa,KAAK,SAAS,EAAE;YAC/B,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC;SAC1C;aAAM;YACL,MAAM,QAAQ,GAAmB,EAAE,OAAO,EAAE,iHAA0D,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC;YAC9H,MAAM,QAAQ,GAAG,0DAAe,CAAC;gBAC/B,SAAS,EAAE,CAAC,QAAQ,CAAC;aACtB,CAAC,CAAC;YACH,MAAM,mBAAmB,GAAG,IAAI,CAAC,wBAAwB,CAAC,uBAAuB,CAAyB,aAAa,CAAC,CAAC;YACzH,OAAO,mBAAmB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;SAC7C;IACH,CAAC;;sFA1CU,mBAAmB;oHAAnB,mBAAmB,WAAnB,mBAAmB,mBAFlB,MAAM;;;;;;;;;;;;;;;;ACTpB,2EAA2E;;AAMpE,MAAM,mBAAmB;IAE9B,gBAAgB,CAAC;IAEjB,iFAAiF;IAC1E,2BAA2B;QAChC,MAAM,WAAW,GAA6C;YAC5D,EAAE,EAAE,YAAY;SACjB,CAAC;QACF,OAAO,WAAW,CAAC;IACrB,CAAC;IAED,6DAA6D;IAC7D,wDAAwD;IACjD,2BAA2B;QAChC,OAAY;YACV,kEAAkE;YAClE,2BAA2B;YAE3B,QAAQ,EAAE;gBACR,UAAU,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI;gBACtE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ;gBACxE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,OAAO;gBAChE,SAAS,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO;aACtD;YAED,YAAY,EAAE;gBACZ,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO;aAC7E;YAED,SAAS,EAAE;gBACT,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;gBACzD,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;gBAC9D,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;gBAC3D,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM;aAC3B;YAED,8CAA8C;YAC9C,OAAO,EAAE,uBAAuB;YAEhC,mBAAmB;YACnB,OAAO,EAAE,uEAAuE;YAEhF,uCAAuC;YACvC,SAAS,EAAE;gBACT,IAAI,EAAE;oBACJ,2BAA2B;oBAC3B,CAAC,eAAe,EAAE;4BAChB,KAAK,EAAE;gCACL,eAAe,EAAE,SAAS;gCAC1B,WAAW,EAAE,SAAS;gCACtB,UAAU,EAAE,YAAY;6BACzB;yBACF,CAAC;oBACF,CAAC,cAAc,EAAE,iBAAiB,CAAC;oBAEnC,aAAa;oBACb,EAAE,OAAO,EAAE,aAAa,EAAE;oBAE1B,2BAA2B;oBAC3B,CAAC,YAAY,EAAE,WAAW,CAAC;oBAC3B,CAAC,kBAAkB,EAAE,WAAW,CAAC;oBACjC,CAAC,UAAU,EAAE;4BACX,KAAK,EAAE;gCACL,YAAY,EAAE,UAAU;gCACxB,UAAU,EAAE,EAAE;6BACf;yBACF,CAAC;oBAEF,iBAAiB;oBACjB,kEAAkE;oBAClE,sFAAsF;oBACtF,CAAC,wBAAwB,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG,EAAE,sBAAsB,EAAE,CAAC;oBAEhF,UAAU;oBACV,CAAC,0BAA0B,EAAE,cAAc,CAAC;oBAC5C,CAAC,mBAAmB,EAAE,YAAY,CAAC;oBACnC,CAAC,KAAK,EAAE,QAAQ,CAAC;oBAEjB,gDAAgD;oBAChD,CAAC,OAAO,EAAE,WAAW,CAAC;oBAEtB,UAAU;oBACV,CAAC,iBAAiB,EAAE,gBAAgB,CAAC;oBACrC,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,cAAc,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;oBAEnE,aAAa;oBACb,CAAC,UAAU,EAAE,QAAQ,CAAC;oBACtB,CAAC,kBAAkB,EAAE,CAAC,QAAQ,EAAE,eAAe,EAAE,QAAQ,CAAC,CAAC;oBAC3D,CAAC,GAAG,EAAE,gBAAgB,CAAC;iBACxB;gBAED,OAAO,EAAE;oBACP,CAAC,SAAS,EAAE,SAAS,CAAC;oBACtB,CAAC,MAAM,EAAE,SAAS,EAAE,OAAO,CAAC;oBAC5B,CAAC,MAAM,EAAE,SAAS,EAAE,MAAM,CAAC;oBAC3B,CAAC,OAAO,EAAE,SAAS,CAAC;iBACrB;gBAED,MAAM,EAAE;oBACN,CAAC,SAAS,EAAE,QAAQ,CAAC;oBACrB,CAAC,UAAU,EAAE,eAAe,CAAC;oBAC7B,CAAC,KAAK,EAAE,uBAAuB,CAAC;oBAChC,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,cAAc,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;iBAClE;gBAED,UAAU,EAAE;oBACV,CAAC,YAAY,EAAE,OAAO,CAAC;oBACvB,CAAC,MAAM,EAAE,SAAS,EAAE,UAAU,CAAC;oBAC/B,CAAC,SAAS,EAAE,SAAS,CAAC;iBACvB;aACF;SACF,CAAC;IACJ,CAAC;IAED,4DAA4D;IACrD,kBAAkB;QACvB,OAAO;YACL,IAAI,EAAE,IAAI;YACV,OAAO,EAAE,KAAK;YACd,KAAK,EAAE;gBACL,EAAE,KAAK,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,EAAE;gBAC1C,EAAE,KAAK,EAAE,QAAQ,EAAE,UAAU,EAAE,QAAQ,EAAE;gBACzC,EAAE,KAAK,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,EAAE;gBAC1C,EAAE,KAAK,EAAE,YAAY,EAAE,UAAU,EAAE,QAAQ,EAAE;gBAC7C,EAAE,KAAK,EAAE,WAAW,EAAE,UAAU,EAAE,QAAQ,EAAE;gBAC5C,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE;gBACxC,EAAE,KAAK,EAAE,UAAU,EAAE,UAAU,EAAE,QAAQ,EAAE;gBAC3C,EAAE,KAAK,EAAE,YAAY,EAAE,UAAU,EAAE,QAAQ,EAAE;gBAC7C,EAAE,KAAK,EAAE,WAAW,EAAE,UAAU,EAAE,QAAQ,EAAE;gBAC5C,EAAE,KAAK,EAAE,YAAY,EAAE,UAAU,EAAE,QAAQ,EAAE;aAC9C;YACD,MAAM,EAAE,EAAE;SACX,CAAC;IACJ,CAAC;;sFAtIU,mBAAmB;oHAAnB,mBAAmB,WAAnB,mBAAmB,mBAFlB,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJpB,2EAA2E;AApB3E;;;;;;;;;;;;;;;;;;GAkBG;AAEH,2EAA2E;AACmC;AAC3D;AAEqC;AACO;AACwC;AACpD;AACrB;;;;AAE9D,IAAI,YAAY,GAAG,KAAK,CAAC;AACzB,IAAI,WAA0B,CAAC;AAoBxB,MAAM,qBAAsB,SAAQ,2FAAsB;IAiD/D,YACU,EAAc,EACd,WAA6B;QAErC,KAAK,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC;QAHhB,OAAE,GAAF,EAAE,CAAY;QACd,gBAAW,GAAX,WAAW,CAAkB;QAjD9B,UAAK,GAAG,eAAe,CAAC;QAGjC,YAAO,GAA2D,EAAE,CAAC;QAErE,eAAU,GAAG,IAAI,iDAAe,CAAS,EAAE,CAAC,CAAC;QAIpC,SAAI,GAAW,QAAQ,CAAC;QAEzB,YAAO,GAAG,IAAI,yCAAO,EAAE,CAAC;QAEf,sBAAiB,GAAG,IAAI,CAAC,CAAC,0EAA0E;QAErH,sBAAiB,GAAG,IAAI,yCAAO,EAAoB,CAAC;QAEpD,WAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAG,gBAAgB;QACrD,4DAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC,EACpC,yDAAS,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,CAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAA0C,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,EAC/I,yDAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CACxB,CAAC;QAEF,mBAAc,GAAG,IAAI,yCAAO,EAAE,CAAC;QAE/B,kBAAa,GAAG,IAAI,iDAAe,CAAU,EAAE,CAAC,CAAC;QAEjD,aAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAChC,mDAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC,CACvD;YACE,IAAI,EAAE,MAAM;YACZ,eAAe,EAAE,KAAK,CAAC,IAAI;YAC3B,WAAW,EAAE,KAAK,CAAC,MAAM;YACzB,aAAa,EAAE,GAAG,CAAC,IAAI;YACvB,SAAS,EAAE,GAAG,CAAC,MAAM;YACrB,OAAO;YACP,QAAQ,EAAE,MAAM,CAAC,cAAc,CAAC,OAAO;SAE1C,EAAC,CAAC,EACH,yDAAS,CAA8B,EAAE,CAAC,EAC1C,yDAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CACxB,CAAC,CAAC,OAAO;QAEV,eAAU,GAAG,oDAAa,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAC3D,mDAAG,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,GAAG,MAAM,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC,CAAC,CAC5F;QAOC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,yDAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;QAEtG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE;;YACvC,MAAM,KAAK,GAAG,UAAI,CAAC,MAAM,0CAAE,QAAQ,EAAE,CAAC;YACtC,IAAI,CAAC,CAAC,KAAK,EAAE;gBACX,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC;aACxD;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,EAAE;;YAChC,MAAM,KAAK,GAAG,UAAI,CAAC,MAAM,0CAAE,QAAQ,EAAE,CAAC;YACtC,IAAI,CAAC,CAAC,KAAK,EAAE;gBACX,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;aACxD;QACH,CAAC,CAAC,CAAC,CAAC,iBAAiB;IACvB,CAAC;IA7DD,IAAa,IAAI,CAAC,CAAS,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzD,IAAI,IAAI,KAAK,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;IA8D5C,WAAW;QACT,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACjC;IACH,CAAC;IAED,eAAe;QACb,IAAI,YAAY,EAAE;YAChB,wCAAwC;YACxC,WAAW,CAAC,IAAI,CAAC,GAAG,EAAE;gBACpB,IAAI,CAAC,UAAU,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,YAAY,GAAG,IAAI,CAAC;YACpB,WAAW,GAAG,IAAI,OAAO,CAAO,CAAC,OAAY,EAAE,EAAE;gBAC/C,IAAI,OAAO,CAAO,MAAO,CAAC,MAAM,CAAC,KAAK,QAAQ,EAAE;oBAC9C,OAAO,EAAE,CAAC;oBACV,OAAO;iBACR;gBACD,MAAM,WAAW,GAAQ,GAAG,EAAE;oBAC5B,cAAc;oBACR,MAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,sBAAsB,EAAE,EAAE,CAAC,CAAC;oBAEpE,MAAO,CAAC,OAAO,CAAC,CAAC,uBAAuB,CAAC,EAAE,GAAG,EAAE;wBACpD,IAAI,CAAC,UAAU,EAAE,CAAC;wBAClB,OAAO,EAAE,CAAC;oBACZ,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC;gBAEF,+BAA+B;gBAC/B,IAAI,CAAO,MAAO,CAAC,OAAO,EAAE;oBAC1B,MAAM,YAAY,GAAsB,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;oBACzE,YAAY,CAAC,IAAI,GAAG,iBAAiB,CAAC;oBACtC,YAAY,CAAC,GAAG,GAAG,gCAAgC,CAAC;oBACpD,YAAY,CAAC,gBAAgB,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;oBACnD,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;iBACzC;qBAAM;oBACL,WAAW,EAAE,CAAC;iBACf;YACH,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAED,WAAW;QACT,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACpB,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;QAExB,mCAAmC;QACnC,2BAA2B;QAC3B,IAAI;IACN,CAAC;IAED,UAAU,CAAC,UAAkE,EAAE;QAC7E,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,wEAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzD,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,wEAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC/E,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE;YACxD,KAAK,EAAE,IAAI,CAAC,IAAI;YAChB,QAAQ,EAAE,IAAI,CAAC,IAAI;YACnB,KAAK,EAAE,SAAS;YAChB,eAAe,EAAE,IAAI;YACrB,UAAU,EAAE,UAAU;YACtB,WAAW,EAAE,KAAK;YAClB,OAAO,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE;SAC5B,CAAC,CAAC;IACL,CAAC;;0FAvIU,qBAAqB;oHAArB,qBAAqB;;;;;8IARrB;YACT;gBACE,OAAO,EAAE,8DAAiB;gBAC1B,WAAW,EAAE,0DAAU,CAAC,GAAG,EAAE,CAAC,uEAAmB,CAAC;gBAClD,KAAK,EAAE,IAAI;aACZ;SACF;;;;;;;;;;;;;;;;;;;;;AChDoC;AACgC;AAClC;;;;;ICAjC,yEAA2D;IACvD,wEAAgD;IAAA,uDAAU;IAAA,4DAAK;IAC/D,uEAA2G;IAC/G,4DAAM;;;IAF8C,0DAAU;IAAV,8EAAU;;;ADM3D,MAAM,kBAAkB;IAL/B;QAWW,aAAQ,GAAuC,OAAO;QACvD,gBAAW,GAAoB,uCAAK,CAAC;QACrC,MAAC,GAAiB,IAAI,8CAAY,EAAE,CAAC;KAe9C;IAdC,IAAa,UAAU,CAAC,CAAkB;QACxC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QACrB,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;QACrB,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAC5B,mDAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAClC,mDAAG,CAAC,GAAG,EAAE,CAAE,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CACjC,CAAC,SAAS,EAAE,CAAC;IAChB,CAAC;IACD,IAAI,UAAU,KAAK,OAAO,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;IAE7C,eAAe;QACb,IAAI,CAAC,SAAS,GAAG,IAAI,gDAAmB,CAAC,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;IAChF,CAAC;;oFAtBU,kBAAkB;gHAAlB,kBAAkB;;;;;;;QCV/B,4EAE+D;QAC3D,8GAGM;QACN,yEAA4B;QACxB,6DAAyB;QAC7B,4DAAM;QACV,4DAAM;;QAViB,qGAA6C;QAG1D,0DAA0B;QAA1B,0FAA0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHpC;;;;;;;;;;;;;;;;;;GAkBG;AAEqI;AAIxD;AACF;AAC1C;AAEpC,kDAAkD;AACiC;AAEpC;;;;;AAG/C;;;;;;;;;;;;;;;;;;;;;;;;EAwBE;AACF,SAAS,4BAA4B,CAAC,gBAA8E;IAClH,OAAO;QACL,UAAU,EAAE,gBAAgB,CAAC,OAAO,CAAC,UAAU,CAAC;QAChD,KAAK,EAAE,gBAAgB,CAAC,OAAO,CAAC,KAAK,CAAC;QACtC,OAAO,EAAE,CAAC,gBAAgB,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QAC/C,QAAQ,EAAE,0BAA0B;QACpC,MAAM,EAAE,gBAAgB,CAAC,MAAM;QAC/B,KAAK,EAAE,gBAAgB,CAAC,KAAK;KAC9B,CAAC;AACJ,CAAC;AAOM,MAAM,YAAa,SAAQ,2FAAsB;IAuDtD,YACU,IAAgB,EAChB,MAAc,EACsD,SAA6B,EACzG,KAAiB;QAEjB,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;QALnB,SAAI,GAAJ,IAAI,CAAY;QAChB,WAAM,GAAN,MAAM,CAAQ;QACsD,cAAS,GAAT,SAAS,CAAoB;QA7C3G,kBAAa,GAAG,IAAI,iDAAe,CAAC,EAAE,CAAC,CAAC;QAUxC,sBAAiB,GAAG,IAAI,iDAAe,CAAqB,SAAS,CAAC,CAAC;QAEvE,0CAA0C;QAClC,UAAK,GAAW,CAAC,CAAC,CAAC,2CAA2C;QAQ5D,eAAU,GAAG,IAAI,uDAAY,EAAU,CAAC;QAEzC,SAAI,GAAW,EAAE,CAAC;QAE3B,gBAAW,GAAgD,IAAI,CAAC,iBAAiB;aAC9E,IAAI,CACH,sDAAM,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EACtB,oEAAoB,EAAE,EACtB,yDAAS,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAqD,GAAI,CAAC,CAAC,EAAE,gEAAgE;QAC7J,mDAAG,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,yDAAyD;aACjF,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,sCAAsC;aACzI,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAuB,EAAE,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,0DAA0D;aAC3I,GAAG,CAAC,4BAA4B,CAAC,CACnC,CACF,CAAC;QAKI,kBAAa,GAAmB,EAAE,CAAC;QASzC,IAAI,CAAC,QAAQ,GAAG,gDAAM,EAAE,CAAC;QACzB,IAAI,CAAC,aAAa,CAAC,IAAI,CACrB,IAAI,CAAC,UAAU,CAAC,IAAI,CAClB,oEAAoB,EAAE,CACvB,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE;YAChB,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE;gBACjB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;aAC7B;QACH,CAAC,CAAC,CAAC,CAAC;IACR,CAAC;IAjED,IAAa,OAAO,CAAC,CAAC;QACpB,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,EAAE;YACvB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;YAClB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SACxC;IACH,CAAC;IACD,IAAI,OAAO,KAAK,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAIvC,IAAa,WAAW,CAAC,CAAS;QAChC,IAAI,CAAC,KAAK,IAAI,CAAC,YAAY,EAAE;YAC3B,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SAChD;IACH,CAAC;IACD,IAAI,WAAW,KAAK,OAAO,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;IAK/C,IAAa,IAAI,CAAC,CAAS;QACzB,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,EAAE;YACpB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YACf,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAClC;IACH,CAAC;IACD,IAAI,IAAI,KAAK,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IAwCjC,eAAe;QACb,MAAM,aAAa,GAAG;YACpB,eAAe,EAAE,GAAG;YACpB,YAAY,EAAE,GAAG;YACjB,gBAAgB,EAAE,CAAC;YACnB,YAAY,EAAE,IAAI;YAClB,mBAAmB,EAAE,IAAI;YACzB,SAAS,EAAE,oBAAoB;YAC/B,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,aAAa;YAC/B,mBAAmB,EAAE,SAAS;YAC9B,aAAa,EAAE,KAAK;YACpB,oBAAoB,EAAE;gBACpB,WAAW,EAAE,KAAK;gBAClB,cAAc,EAAE,IAAI;aACrB;SACF,CAAC;QAEF,CAAC;QACD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,mDAAa,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;aAC1E,SAAS,CAAC,CAAC,CAAC,OAAO,EAAE,WAAW,CAAC,EAAE,EAAE;YACpC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,GAAG,EAAE,CAC/C,0CAAa,+CACR,aAAa,KAChB,mBAAmB,EAAE,KAAK,KACvB,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,WAAW,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,EAC9C,CACH,CAAC;YAGF,yCAAyC;YACzC,mCAAmC;YACnC,wBAAwB;YACxB,qDAAqD;YACrD,sDAAsD;YACtD,sDAAsD;YACtD,qDAAqD;YACrD,qCAAqC;YACrC,QAAQ;YAER,qFAAqF;YACrF,MAAM;YAGN,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC;YAClF,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,wBAAwB;YACvG,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CACxC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAkC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CACzF,CAAC;QACJ,CAAC,CAAC,CAAC,CAAC;IACR,CAAC;IAED,WAAW;QACT,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;IACrD,CAAC;;wEA9HU,YAAY,sTA0Db,+HAA0D;0GA1DzD,YAAY;0EAEG,qDAAU;;;;;QCzDtC,uEACM;;;;;;;;;;;;;;;;;;ACC6E;;;AAO5E,MAAM,sBAAuB,SAAQ,2FAAsB;IAChE,YAC8E,SAA6B,EACzG,KAAiB;QAEjB,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;QAHiD,cAAS,GAAT,SAAS,CAAoB;IAI3G,CAAC;;4FANU,sBAAsB,kEAEvB,+HAA0D;oHAFzD,sBAAsB;QCTnC,oEAAG;QAAA,gFAAqB;QAAA,4DAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpB5B;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;;;;;;;;;;ACFIS,IAAAA,4DAAAA;AAAGA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;AAAA;AAAA,aAASC,eAAT;AAAiB,KAAjB;AAAqHD,IAAAA,0DAAAA;;;;;AAAlGA,IAAAA,yDAAAA;;;;;;AACtBA,IAAAA,4DAAAA;AACIA,IAAAA,uDAAAA;AACJA,IAAAA,0DAAAA;;;;;AAFyDA,IAAAA,wDAAAA;;;;;;AAM7DA,IAAAA,uDAAAA;;;;;;AAEIA,IAAAA,uDAAAA;;;;;;AAAkDA,IAAAA,wDAAAA,gBAAW,cAAX,EAAWE,mBAAX;;;;;;AAKlDF,IAAAA,4DAAAA;AAAKA,IAAAA,oDAAAA;AAAQA,IAAAA,0DAAAA;;;;ADHjB,MAAMG,oBAAoB,GAAiB;AAAEC,IAAE,EAAE,EAAN;AAAUC,OAAK,EAAE,EAAjB;AAAqBC,UAAQ,EAAE;AAA/B,CAA3C;AAWM,MAAOC,iBAAP,CAAwB;AAL9BC;AAQE,kBAAS,KAAT;AAEU,uBAAc,IAAIjB,uDAAJ,EAAd;AAEF,kBAAuBY,oBAAvB;AAOR,uBAAc,IAAIV,iDAAJ,CAAkC,KAAKgB,MAAvC,CAAd;AAGQ,yBAAkC;AAAEC,aAAO,EAAGC,CAAD,IAAOf,uCAAKA;AAAvB,KAAlC;AACR,8BAAqB,IAAIH,iDAAJ,CAAsC,KAAKmB,aAA3C,CAArB;AAQA,0BAAiB,IAAInB,iDAAJ,CAA6B,KAA7B,CAAjB;AAEA,oBACEC,mDAAa,CAAC,CACZ,KAAKmB,kBADO,EAEZ,KAAKC,WAFO,CAAD,CAAb,CAGGC,IAHH,CAIElB,mDAAG,CAAC,CAAC,CAAC;AAAEa;AAAF,KAAD,EAAc;AAAEJ;AAAF,KAAd,CAAD,KAAiCA,QAAQ,CAACT,GAAT,CAAaa,OAAb,CAAlC,CAJL,EAKEZ,yDAAS,CAAEkB,CAAD,IAAOrB,8CAAQ,CAACqB,CAAD,CAAhB,CALX,EAMEjB,mDAAG,CAAC,MAAM,KAAKkB,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAP,CANL,CADF;AAwBD;;AA5CmB,MAALC,KAAK,CAACC,CAAD,EAAgB;AAChC,SAAKX,MAAL,GAAcW,CAAd;AACA,SAAKN,WAAL,CAAiBI,IAAjB,CAAsB,KAAKT,MAA3B;AAED;;AACQ,MAALU,KAAK;AAAK,WAAO,KAAKV,MAAZ;AAAqB;;AAMV,MAAZY,YAAY,CAACD,CAAD,EAAoB;AAC3C,SAAKR,aAAL,GAAqBQ,CAArB;AACA,SAAKP,kBAAL,CAAwBK,IAAxB,CAA6B,KAAKN,aAAlC;AAED;;AACe,MAAZS,YAAY;AAAK,WAAO,KAAKT,aAAZ;AAA4B;;AAejDU,iBAAe;AACb,SAAKC,mBAAL,GAA2B,IAAI/B,+CAAJ,CAAuB,KAAKiC,eAAL,CAAqBC,aAA5C,EAA2D;AAAEC,YAAM,EAAE;AAAV,KAA3D,CAA3B;AACA,SAAKJ,mBAAL,CAAyBK,IAAzB;AAED;;AAEDD,QAAM;AACJ,QAAI,CAAC,CAAC,KAAKR,KAAP,IAAgB,KAAKA,KAAL,CAAWb,QAAX,CAAoBuB,MAApB,GAA6B,CAAjD,EAAoD;AAClD,WAAKN,mBAAL,CAAyBI,MAAzB;AACA,WAAKG,MAAL,GAAc,CAAC,KAAKA,MAApB;AACD;AACF;;AAlD2B;;;mBAAjBvB;AAAiB;;;QAAjBA;AAAiBwB;AAAAC;AAAA;;;;;;;;;;;;;;;;;;;;;;ACvB9BhC,MAAAA,4DAAAA;AACIA,MAAAA,wDAAAA;AACAA,MAAAA,wDAAAA;AAGAA,MAAAA,4DAAAA;AAAMA,MAAAA,wDAAAA;AAASiC;AAA0B,eAACA,YAAD;AAAS,OAA5C;AAA+CjC,MAAAA,oDAAAA;AAAgBA,MAAAA,0DAAAA;AAEzEA,MAAAA,0DAAAA;AACAA,MAAAA,wDAAAA;;AACAA,MAAAA,4DAAAA;AACIA,MAAAA,wDAAAA;;AAEJA,MAAAA,0DAAAA;AAEAA,MAAAA,wDAAAA,8EAAAA,oEAAAA;;;;AAbmDA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AAC3CA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AAGiDA,MAAAA,uDAAAA;AAAAA,MAAAA,gEAAAA;AAGlDA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA,wBAAAA,yDAAAA;AAE0BA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA,YAAAA,yDAAAA;;;0LDapBO;AAAiB2B,UAAAA,sDAAAA;AAAAC;;;;;;;;;;;;;;;;;;;;;;AEzC9B;;;;;;;;;;;ACCQnC,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AAAmEA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;AAAA;AAAA,aAASE,2BAAT;AAA6B,KAA7B;AAC/DF,IAAAA,uDAAAA;AACJA,IAAAA,0DAAAA;AAUJA,IAAAA,0DAAAA;;;;;;AAMIA,IAAAA,4DAAAA;AAAuCA,IAAAA,oDAAAA;AAAWA,IAAAA,0DAAAA;;;;;AAAjCA,IAAAA,wDAAAA;AAAsBA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA;;;;;;AACvCA,IAAAA,qEAAAA;AAA2BA,IAAAA,oDAAAA;AAAWA,IAAAA,mEAAAA;;;;;AAAXA,IAAAA,uDAAAA;AAAAA,IAAAA,+DAAAA;;;;;;AAF/BA,IAAAA,4DAAAA;AACIA,IAAAA,wDAAAA;AACAA,IAAAA,wDAAAA;AACJA,IAAAA,0DAAAA;;;;;AAH2EA,IAAAA,yDAAAA;AACnEA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA;AACWA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA;;;;;;AAJ3BA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AACIA,IAAAA,wDAAAA;AAIJA,IAAAA,0DAAAA;AACJA,IAAAA,0DAAAA;;;;;AAL0BA,IAAAA,uDAAAA;AAAAA,IAAAA,wDAAAA;;;;;;AAUtBA,IAAAA,uDAAAA;;;;;;AAAmDA,IAAAA,wDAAAA,iBAAW,cAAX,EAAWqC,mBAAX;;;;;ADrBjD,MAAOC,eAAP,CAAsB;AAQ1B9B;AAPS,sBAAa,IAAb;AACA,uBAAiD,EAAjD;AACT,yBAAgB,IAAI4B,yCAAJ,EAAhB;AAES,qBAAwCxC,uCAAxC;AACA,wBAAsE;AAAEc,aAAO,EAAGC,CAAD,IAAOf,uCAAKA;AAAvB,KAAtE;AAIR;;AAED2C,OAAK,CAACC,GAAD,EAAW,CAEf;;AAdyB;;;mBAAfF;AAAe;;;QAAfA;AAAeP;AAAAU;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;AAAAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;;ACV5BlD,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AAAmCA,MAAAA,oDAAAA;AAAWA,MAAAA,0DAAAA;AAC9CA,MAAAA,wDAAAA;AAcJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;AACAA,MAAAA,wDAAAA;AASAA,MAAAA,0DAAAA;AAEAA,MAAAA,4DAAAA;AACIA,MAAAA,wDAAAA;;AACJA,MAAAA,0DAAAA;AAEAA,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,oDAAAA;AAEJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;;;;AApCcA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AAgBRA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA;AAWoBA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA,2BAAyB,YAAzB,EAAyBiC,iBAAzB;AACOjC,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA,YAAAA,yDAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IE1BrB,6EAC8C;IADQ,2VAAS,sCAA4B,IAAC;IAExF,uDACA;IAAA,mEAAkC;IACtC,4DAAS;;;IAFL,0DACA;IADA,sFACA;IAAG,0DAA0B;IAA1B,qJAA0B;;ADAtC,MAAM,kBAAkB;IAM7B,YACS,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;QALvB,kBAAa,GAAG;YACd,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,cAAc,EAAE;YACpE,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,WAAW,EAAE;SAC/D;IAID,CAAC;;oFATU,kBAAkB;gHAAlB,kBAAkB;QCR/B,gFAAiC;QAE7B,0EAAuC;QACnC,yEAAgG;QAC5F,uEAAoC;QAAA,uEAAY;QAAA,4DAAI;QACpD,oHAIS;QACb,4DAAM;QAEN,yEAAoD;QAChD,uEAAyC;QAAA,6DAAE;QAAA,4DAAI;QACnD,4DAAM;QAGN,yEAA+B;QAC3B,uEACgD;QAChD,4EAA8C;QAAA,yEAAa;QAAA,4DAAQ;QACvE,4DAAM;QAGN,2EAA+B;QAC3B,wEACmC;QACnC,6EAA8C;QAAA,oEAAQ;QAAA,4DAAQ;QAClE,4DAAM;QAEN,2EAA+D;QAE3D,2EAA6B;QACzB,wEAAmF;QACnF,6EAAoD;QAChD,yEACJ;QAAA,4DAAQ;QACZ,4DAAM;QACN,yEAA+B;QAAA,4EAAgB;QAAA,4DAAI;QACvD,4DAAM;QAEN,2EAAiD;QAC7C,8EACyD;QADJ,2IAAS,yBAAqB,gBAAgB,CAAC,IAAC;QAC5C,iEAAK;QAAA,4DAAS;QACvE,yEAAwC;QAAA,mFAAuB;QAAA,yEAAiC;QAAA,oEAAQ;QAAA,4DAAI;QAC5G,4DAAI;QACR,4DAAM;QAEV,4DAAO;QACX,4DAAa;;QAjDD,6EAAoB;QAKE,0DAAgB;QAAhB,sFAAgB;;;;;;;;;;;;;;;;;;;;;;;;ACJI;AACjB;AACwF;AACzD;;;;;AAS7D,MAAM,iBAAiB;IAqB5B,YACU,MAAuB;QAAvB,WAAM,GAAN,MAAM,CAAiB;QAnBjC,cAAS,GAAG,wCAAE,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAC7C,mDAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAmB,EAAC,CAAC,CAC1F,CAAC;QAEF,iBAAY,GAA0D;YACpE,OAAO,EAAE,CAAC,EAAU,EAAE,EAAE;gBACtB,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAChC,IAAI,EAAE,KAAK,SAAS,EAAE;oBACpB,OAAO,uCAAK,CAAC;iBACd;gBACD,OAAO,wCAAE,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE,CAAC,QAAQ,EAAkB,CAAC,CAAC;YACxE,CAAC;SACF;IASD,CAAC;IAGD,MAAM;QACJ,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,mFAAiB,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;IACpE,CAAC;;kFA7BU,iBAAiB;+GAAjB,iBAAiB;kEAkBjB,uIAAyB;;;;;QC/BtC,gFAAkE;QAE9D,4EAAwC;QAAhC,yIAAS,yBAAqB,IAAC;QAAC,sEAAW;QAAA,4DAAS;QAC5D,4EAAwC;QAAhC,yIAAS,yBAAqB,IAAC;QAAC,sEAAW;QAAA,4DAAS;QAE5D,4EAA2B;QAAnB,yIAAS,YAAQ,IAAC;QAAC,8DAAG;QAAA,4DAAS;QAEvC,yEAAgC;QAC5B,oFAAiD;QACrD,4DAAM;QAGV,4DAAa;;QAZD,oFAAuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACInC;AACA;AAEA;AACA;AAIA;;;;;;;;;;;;;ACXIA,IAAAA,qEAAAA;AAEIA,IAAAA,4DAAAA;AAA4DA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;AAAA;AAAA,aAASqC,eAAT;AAAiB,KAAjB;AACxDrC,IAAAA,uDAAAA;AACJA,IAAAA,0DAAAA;AACAA,IAAAA,4DAAAA;AAA4DA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;;AAAA;;AAAA;AAAA,aAASyD,sBAAT;AAA8B,KAA9B;AACxDzD,IAAAA,uDAAAA;AACJA,IAAAA,0DAAAA;AACAA,IAAAA,4DAAAA;AAA4DA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;AAAA;AAAA,aAAS0D,mBAAT;AAAqB,KAArB;AACxD1D,IAAAA,uDAAAA;AACJA,IAAAA,0DAAAA;AACAA,IAAAA,4DAAAA;AACIA,IAAAA,4DAAAA;AAAwBA,IAAAA,wDAAAA;AAAAA,MAAAA,2DAAAA;AAAA;AAAAC;AAAA,aAAqBA,sBAArB;AAAoC,KAApC;AAAsCD,IAAAA,0DAAAA;AAClEA,IAAAA,0DAAAA;AACJA,IAAAA,mEAAAA;;;;;;;;ADDJ,SAAS2D,YAAT,CAAsBC,EAAtB,EAA0CC,IAA1C,EAAuE;AACrE,QAAMC,EAAE,GAAGC,aAAa,CAACH,EAAE,CAACI,SAAJ,EAAeH,IAAI,CAACI,MAAL,CAAajD,CAAD,IAAO4C,EAAE,CAACI,SAAH,CAAaE,QAAb,CAAsBlD,CAAC,CAACmD,IAAxB,CAAnB,CAAf,CAAxB;AACA,QAAMC,CAAC,GAAGN,EAAE,CAACjE,GAAH,CAAQwE,UAAD,IAAe;AAC9B,UAAMC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeH,UAAU,CAACxE,GAAX,CAAe,CAAC;AAAEsE,UAAF;AAAQG;AAAR,KAAD,MAAqB;AAAEH,UAAF;AAAQG;AAAR,KAArB,CAAf,CAAf,CAAb;AACA,WAAO;AACLA,UADK;AAELD;AAFK,KAAP;AAID,GANS,CAAV;AAQA,SAAOD,CAAP;AAED,EAED;;;AACA,SAASL,aAAT,CAAuBU,KAAvB,EAAwCZ,IAAxC,EAAqE;AACnE,MAAIY,KAAK,CAAC5C,MAAN,KAAiB,CAArB,EAAwB;AAAE,WAAO,EAAP;AAAY;;AAEtC,QAAM,CAAC6C,CAAD,EAAI,GAAGC,IAAP,IAAeF,KAArB;AACA,QAAMG,MAAM,GAAGf,IAAI,CAACgB,IAAL,CAAW7D,CAAD,IAAOA,CAAC,CAACmD,IAAF,KAAWO,CAA5B,CAAf;;AAEA,MAAIE,MAAM,KAAKE,SAAf,EAA0B;AAAE,WAAO,EAAP;AAAY;;AAExC,QAAMC,IAAI,GAAGlB,IAAI,CAACI,MAAL,CAAajD,CAAD,IAAOA,CAAC,KAAK4D,MAAN,IAAgBD,IAAI,CAACT,QAAL,CAAclD,CAAC,CAACmD,IAAhB,CAAnC,CAAb;;AACA,MAAIY,IAAI,CAAClD,MAAL,KAAgB,CAApB,EAAuB;AACrB,WAAO,CAAC,CAAC+C,MAAD,CAAD,CAAP;AACD;;AACD,QAAM5D,CAAC,GAAG+C,aAAa,CAACY,IAAD,EAAOI,IAAP,CAAvB;AACA,QAAMC,CAAC,GAAGhE,CAAC,CAACnB,GAAF,CAAOoF,CAAD,IAAO,CAACL,MAAD,EAAS,GAAGK,CAAZ,CAAb,CAAV;AACA,SAAOlB,aAAa,CAACY,IAAD,EAAOI,IAAP,CAAb,CAA0BlF,GAA1B,CAA+BoF,CAAD,IAAO,CAACL,MAAD,EAAS,GAAGK,CAAZ,CAArC,CAAP;AACD;;AAQK,MAAOC,oBAAP,CAA2B;AAkF/B1E,cACS2E,KADT,EAEUC,WAFV,EAGSC,EAHT,EAG4B;AAFnB;AACC;AACD;AAlFD,mBAAU,IAAIjD,yCAAJ,EAAV;AACR,oBAAW,IAAIA,yCAAJ,EAAX;AAEA,uBAAc,KAAK+C,KAAL,CAAWG,QAAX,CAAoBvE,IAApB,CACZlB,mDAAG,CAAE0F,CAAD,IAAOA,CAAC,CAACC,GAAF,CAAM,IAAN,CAAR,CADS,EAEZ3F,mDAAG,CAAEO,EAAD,IAAQ,KAAKiF,EAAL,CAAQI,IAAR,CAAarF,EAAb,CAAT,CAFS,EAGZP,mDAAG,CAAE6F,CAAD,IAAOA,CAAC,CAAC7F,GAAF,CAAM,CAAC;AAAEO,QAAF;AAAMC;AAAN,KAAD,MAAoB;AAAEsF,UAAI,EAAE,iBAAiBvF,EAAE,EAA3B;AAA+BC;AAA/B,KAApB,CAAN,CAAR,CAHS,CAAd;AAMA,sBAAa,KAAK8E,KAAL,CAAWG,QAAX,CAAoBvE,IAApB,CACXlB,mDAAG,CAAE0F,CAAD,IAAOA,CAAC,CAACC,GAAF,CAAM,IAAN,CAAR,CADQ,EAEX3F,mDAAG,CAAEO,EAAD,IAAQ,KAAKiF,EAAL,CAAQhB,UAAR,CAAmBjE,EAAnB,CAAT,CAFQ,EAGXgD,0DAAS,CAAC,KAAKwC,OAAN,CAHE,CAAb;AAMA,yBAAgB,KAAKC,QAAL,CAAc9E,IAAd,CACdjB,0DAAS,CAAC,MAAM,KAAKuE,UAAZ,CADK,EAEdxE,mDAAG,CAAC,CAAC;AAAEwE;AAAF,KAAD,KAAmB;AACrB,WAAKyB,EAAL,CAAQC,KAAR;AAEA,YAAMC,OAAO,GAAG3B,UAAU,CAACxE,GAAX,CAAgBoG,CAAD,IAAO,KAAKH,EAAL,CAAQI,GAAR,CAAYD,CAAC,CAACE,aAAd,EAA2BC,kBAAOH,CAAP,CAA3B,EAAuCI,QAA7D,EACbpC,MADa,CACLgC,CAAD,IAAOA,CAAC,YAAY3C,2GADd,EAEbzD,GAFa,CAERoG,CAAD,IAAQA,CAFC,CAAhB;AAIA,aAAOD,OAAP;AACD,KARE,CAFW,CAAhB;AAaA,mBAAU,IAAI5D,yCAAJ,EAAV;AAEA,oBAAW,KAAKiC,UAAL,CAAgBtD,IAAhB,CACTlB,mDAAG,CAAC,CAAC;AAAEwE;AAAF,KAAD,KAAmB;AACrB,YAAMI,KAAK,GAAIJ,UAAwB,CACpCJ,MADY,CACL,CAAC;AAAEE;AAAF,OAAD,KAAcA,IAAI,KAAKW,SADlB,EAEZjF,GAFY,CAER,CAAC;AAAEsE;AAAF,OAAD,KAAcA,IAFN,CAAf;AAKA,aAAO,KAAKiB,WAAL,CAAiBkB,QAAjB,CAA0B7B,KAA1B,CAAP;AACD,KAPE,CADM,CAAX;AAWA,iBAAQ,IAAIrC,yCAAJ,EAAR;AAEA,iBAAQ,KAAKmE,aAAL,CAAmBxF,IAAnB,CACNlB,mDAAG,CAAE+D,EAAD,IAAQA,EAAE,CAAC/D,GAAH,CAAQoG,CAAD,IAAOA,CAAC,CAACO,UAAhB,CAAT,CADG,CAAR;AAMA,aAAI,KAAKC,KAAL,CAAW1F,IAAX,CACFsC,+DAAc,CAAC3D,oDAAa,CAAC,CAAC,KAAK4G,QAAN,CAAD,CAAd,CADZ,CAAJ;AAIA,oBAAW,KAAKG,KAAL,CAAW1F,IAAX,CACTsC,+DAAc,CAAC3D,oDAAa,CAAC,CAAC,KAAK4G,QAAN,EAAgB,KAAKC,aAArB,EAAoC,KAAKG,CAAzC,CAAD,CAAd,CADL,EAET3G,oDAAG,CAAC,CAAC,CAACY,CAAD,EAAI,CAACiD,EAAD,EAAKC,IAAL,CAAJ,CAAD,KAAqBD,EAAE,CAAC+C,OAAH,CAAYV,CAAD,IAClCtC,YAAY,CAACsC,CAAD,EAAIpC,IAAJ,CAAZ,CAAsB8C,OAAtB,CAA8B,CAAC;AAAErC,UAAF;AAAQD;AAAR,KAAD,KAC5B4B,CAAC,CAACW,QAAF,CAAWtC,IAAX,EACGuC,IADH,CACSC,KAAD,IAAWzC,UAAU,CAACsC,OAAX,CAAoB1B,CAAD,IAAOA,CAAC,CAAC8B,aAAF,CAAgB7F,IAAhB,CAAqB4F,KAArB,CAA1B,CADnB,CADF,CADuB,CAAtB,CAFM,EAOT1D,0DAAS,CAAC,KAAKwC,OAAN,CAPA,CAAX;AAUA,qBAAYzC,yCAAE,CAAC,KAAKkC,EAAL,CAAQ2B,YAAR,EAAD,CAAF,CAA2BjG,IAA3B,CACVlB,mDAAG,CAAEmB,CAAD,IAAOA,CAAC,CAACnB,GAAF,CAAM,CAAC;AAAEO,QAAF;AAAMC,WAAN;AAAaC;AAAb,KAAD,MAA8B;AAAEF,QAAF;AAAMC,WAAN;AAAaC,cAAb;AAAuBqF,UAAI,EAAE,iBAAiBvF,EAAE;AAAhD,KAA9B,CAAN,CAAR,CADO,CAAZ;AAIA,wBAAsE;AACpEM,aAAO,EAAGN,EAAD,IAAe;AACtB,cAAM6G,EAAE,GAAG,KAAK5B,EAAL,CAAQ6B,IAAR,CAAa9G,EAAb,CAAX;;AACA,YAAI6G,EAAE,KAAKnC,SAAX,EAAsB;AACpB,iBAAOlF,wCAAP;AACD;;AACD,eAAOuD,yCAAE,CAAC;AAAE9C,eAAK,EAAE4G,EAAE,CAAC5G,KAAZ;AAAmBC,kBAAQ,EAAE2G,EAAE,CAAC3G,QAAhC;AAA0CqF,cAAI,EAAE,iBAAiBsB,EAAE,CAAC7G,EAAE;AAAtE,SAAD,CAAT;AACD;AAPmE,KAAtE;AAiBE,SAAKmG,aAAL,CAAmBY,SAAnB;AACA,SAAKC,QAAL,CAAcD,SAAd;AACA,SAAKT,CAAL,CAAOS,SAAP;;AAEA,QAAI3D,gFAAJ,EAA4B;AAC1B8D,aAAO,CAACC,GAAR,CAAY,SAAZ;AACD,KAFD,MAEM;AACJD,aAAO,CAACC,GAAR,CAAY,KAAZ;AACD;AACF;;AAEDC,aAAW;AACT,SAAK5B,OAAL,CAAa1E,IAAb;AACD;;AAEDuG,UAAQ;AACN,SAAKrH,EAAL,GAAU,KAAK+E,KAAL,CAAWuC,QAAX,CAAoBpC,QAApB,CAA6BE,GAA7B,CAAiC,IAAjC,CAAV;AACD;;AAEDmC,QAAM;AACJ,SAAK7B,EAAL,CAAQ8B,aAAR,CAAsB1G,IAAtB,CAA2B,CAACqC,mFAAD,EAAoB;AAAEuE,iBAAW,EAAE;AAAf,KAApB,CAA3B;AACD;;AAEDC,YAAU,CAACC,SAAD,EAAuB;AAC/B,QAAI,CAACC,QAAQ,CAACC,iBAAd,EAAiC;AAC/BF,eAAS,CAACG,iBAAV;AACD;AACF;;AAlH8B;;;mBAApBjD,sBAAoBlF,+DAAAA,CAAAA,4DAAAA,GAAAA,+DAAAA,CAAAA,gFAAAA,GAAAA,+DAAAA,CAAAA,+EAAAA;AAAA;;;QAApBkF;AAAoBnD;AAAAgB;AAAAC;AAAAC;AAAAC;AAAA;ACpDjClD,MAAAA,4DAAAA;;AACIA,MAAAA,wDAAAA;;AAeJA,MAAAA,0DAAAA;;;;AAhBYA,MAAAA,wDAAAA,gBAAAA,yDAAAA,2BAAAA,6DAAAA,UAA2C,WAA3C,EAA2CiC,aAA3C,EAA2C,cAA3C,EAA2CA,gBAA3C;AACOjC,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA,SAAAA,yDAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAnB;AACA;;;;;;;;;ACAQA,IAAAA,uDAAAA;;;;;;AAAmDA,IAAAA,wDAAAA,gBAAW,cAAX,EAAWoI,mBAAX;;;;ADSrD,MAAOC,qBAAP,CAA4B;AAqChC7H,cACU6E,EADV,EAC6B;AAAnB;AApCV,iBAAQ,CACN;AAAEhF,WAAK,EAAE,OAAT;AAAkBD,QAAE,EAAE;AAAtB,KADM,EAEN;AAAEC,WAAK,EAAE,OAAT;AAAkBD,QAAE,EAAE;AAAtB,KAFM,EAGN;AAAEC,WAAK,EAAE,OAAT;AAAkBD,QAAE,EAAE;AAAtB,KAHM,EAIN;AAAEC,WAAK,EAAE,OAAT;AAAkBD,QAAE,EAAE;AAAtB,KAJM,EAKN;AAAEC,WAAK,EAAE,OAAT;AAAkBD,QAAE,EAAE;AAAtB,KALM,EAMN;AAAEC,WAAK,EAAE,OAAT;AAAkBD,QAAE,EAAE;AAAtB,KANM,CAAR;AASA;;;;;;;;AAYI,qBAAY+C,wCAAE,CAAC,KAAKkC,EAAL,CAAQ2B,YAAR,EAAD,CAAF,CAA2BjG,IAA3B,CACVlB,mDAAG,CAAEmB,CAAD,IAAOA,CAAC,CAACnB,GAAF,CAAM,CAAC;AAAEO,QAAF;AAAMC,WAAN;AAAaC;AAAb,KAAD,MAA8B;AAAEF,QAAF;AAAMC,WAAN;AAAaC,cAAb;AAAuBqF,UAAI,EAAE,iBAAiBvF,EAAE;AAAhD,KAA9B,CAAN,CAAR,CADO,CAAZ;AAIA,wBAAsE;AACpEM,aAAO,EAAGN,EAAD,IAAe;AACtB,cAAM6G,EAAE,GAAG,KAAK5B,EAAL,CAAQ6B,IAAR,CAAa9G,EAAb,CAAX;;AACA,YAAI6G,EAAE,KAAKnC,SAAX,EAAsB;AACpB,iBAAOlF,uCAAP;AACD;;AACD,eAAOuD,wCAAE,CAAC;AAAE9C,eAAK,EAAE4G,EAAE,CAAC5G,KAAZ;AAAmBC,kBAAQ,EAAE2G,EAAE,CAAC3G,QAAhC;AAA0CqF,cAAI,EAAE,iBAAiBsB,EAAE,CAAC7G,EAAE;AAAtE,SAAD,CAAT;AACD;AAPmE,KAAtE;AAaH;;AAEDqH,UAAQ,IACP;;AA3C+B;;;mBAArBY,uBAAqBrI,+DAAAA,CAAAA,+EAAAA;AAAA;;;QAArBqI;AAAqBtG;AAAAgB;AAAAC;AAAAC;AAAAC;AAAA;ACXlClD,MAAAA,4DAAAA;AACIA,MAAAA,4DAAAA;AACIA,MAAAA,wDAAAA;;AACJA,MAAAA,0DAAAA;AACJA,MAAAA,0DAAAA;;;;AAFqCA,MAAAA,uDAAAA;AAAAA,MAAAA,wDAAAA,YAAAA,yDAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFrC,wEAAwE;AAGpC;AACO;;AAI3C,SAAS,oBAAoB,CAAC,CAAW,EAAE,EAAU;IACnD,OAAO;QACL,EAAE;QACF,iBAAiB,EAAE,CAAC,CAAC,WAAW;QAChC,kBAAkB,EAAE,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE;YACtC,IAAI,IAAI,GAAG,KAAK,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;YAChD,IAAI,KAAK,GAAG;gBACV,eAAe,EAAE,QAAQ,CAAC,UAAU;gBACpC,aAAa,EAAE,QAAQ,CAAC,UAAU;gBAClC,WAAW,EAAE,IAAI,CAAC,WAAW;gBAC7B,SAAS,EAAE,IAAI,CAAC,SAAS;aAC1B,CAAC;YACF,OAAO;gBACL,WAAW,EAAE,CAAC;wBACZ,KAAK,EAAE,SAAS;wBAChB,IAAI,EAAE,MAAM,CAAC,SAAS,CAAC,kBAAkB,CAAC,QAAQ;wBAClD,aAAa,EAAE,oBAAoB;wBACnC,UAAU,EAAE,SAAS;wBACrB,KAAK,EAAE,KAAK;qBACb;oBACD;wBACE,KAAK,EAAE,SAAS;wBAChB,IAAI,EAAE,MAAM,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI;wBAC9C,aAAa,EAAE,oBAAoB;wBACnC,UAAU,EAAE,SAAS;wBACrB,KAAK,EAAE,KAAK;qBACb;iBACA;aACF;QACH,CAAC;QACD,aAAa,EAAE,CAAC,KAAK,EAAE,EAAE;YACvB,OAAO,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;iBAC9B,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CAC/C;gBACE,IAAI,EAAE,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE;gBAC1B,eAAe,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI;gBACjC,WAAW,EAAE,KAAK,CAAC,KAAK,CAAC,MAAM;gBAC/B,aAAa,EAAE,KAAK,CAAC,GAAG,CAAC,IAAI;gBAC7B,SAAS,EAAE,KAAK,CAAC,GAAG,CAAC,MAAM;gBAC3B,OAAO,EAAE,OAAO;gBAChB,QAAQ,EAAE,MAAM,CAAC,cAAc,CAAC,KAAK;aAExC,EACA,CAAC,CAAC;QACP,CAAC;KACF;AACH,CAAC;AAKM,MAAM,gBAAgB;IAH7B;QAKE,QAAG,GAAG,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC;KAqDrC;IAnDC,QAAQ,CAAC,KAAe;QACtB,OAAO,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7E,CAAC;IAED,gBAAgB,CAAC,IAAwB,EAAE,iBAA4C;QACrF,IAAI,MAAM,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,EAAE;YAAE,OAAO,EAAE,CAAC;SAAE;QAEjF,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;QAC3C,OAAO;YAEL,0CAA0C;YAC1C,gDAAgD;YAChD,wBAAwB;YACxB,4BAA4B;YAC5B,OAAO;YACP,iCAAiC;YACjC,iFAAiF;YACjF,sBAAsB;YAEtB,mDAAmD;YACnD,sBAAsB;YACtB,8BAA8B;YAC9B,8BAA8B;YAC9B,WAAW;YAEX,sCAAsC;YAEtC,oBAAoB;YACpB,UAAU;YAEV,eAAe;YACf,oCAAoC;YACpC,8BAA8B;YAC9B,SAAS;YACT,MAAM;YACN,MAAM;YAEN,MAAM,CAAC,SAAS,CAAC,wBAAwB,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,iBAAiB,CAAC;YAC1E,MAAM,CAAC,SAAS,CAAC,8BAA8B,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,sBAAsB,EAAE,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC7G,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,EAAE,GAAG,EAAE;gBACxC,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,KAAK,EAAE,EAAE;oBACvC,IAAI,KAAK,CAAC,aAAa,EAAE,KAAK,IAAI,CAAC,EAAE,EAAE;wBACrC,KAAK,CAAC,kBAAkB,CAAC,GAAG,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;qBACzE;gBACH,CAAC,CAAC,CAAC;YACL,CAAC,CAAC;SACH,CAAC;IAIJ,CAAC;;gFAtDU,gBAAgB;iHAAhB,gBAAgB,WAAhB,gBAAgB,mBAFf,MAAM;AAuEb,MAAM,QAAQ,GAAuC;IAC1D,QAAQ,EAAE,oBAAoB,CAAC,IAAI,8CAAU,CAAC,8BAA8B,EAAE,KAAK,CAAC,EAAE,QAAQ,CAAC;IAC/F,YAAY,EAAE,oBAAoB,CAAC,IAAI,qDAAa,CAAC,8BAA8B,EAAE,KAAK,CAAC,EAAE,YAAY,CAAC;IAC1G,eAAe,EAAE,oBAAoB,CAAC,IAAI,8CAAU,CAAC,8BAA8B,EAAE,KAAK,CAAC,EAAE,eAAe,CAAC;IAC7G,gBAAgB,EAAE,oBAAoB,CAAC,IAAI,8CAAU,CAAC,8BAA8B,EAAE,KAAK,CAAC,EAAE,gBAAgB,CAAC;IAC/G,qBAAqB,EAAE,oBAAoB,CAAC,IAAI,8CAAU,CAAC,8BAA8B,EAAE,KAAK,CAAC,EAAE,qBAAqB,CAAC;CAC1H;AAEM,MAAM,eAAe,GAAmC;IAC7D,uBAAuB,EAAE;QACvB,EAAE,EAAE,uBAAuB;QAC3B,QAAQ,EAAE,CAAC,IAAY,EAAE,EAAE;YACzB,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAqC,CAAC;YAErE,MAAM,IAAI,GAAG,OAAO;iBACjB,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;iBACrC,KAAK,CAAC,CAAC,GAAW,EAAE,CAAS,EAAE,GAAa,EAAE,EAAE,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAChE;YAEH,OAAO,IAAI,OAAO,CAAY,CAAC,OAAO,EAAE,EAAE;gBACxC,IAAI,IAAI,EAAE;oBACR,OAAO,CAAC,EAAE,CAAC,CAAC;oBACZ,OAAO;iBACR;gBACD,OAAO,CAAC;oBACN;wBACE,OAAO,EAAE,0EAA0E;wBACnF,KAAK,EAAE;4BACL,KAAK,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE;4BAC7B,GAAG,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,EAAE;yBACnC;qBACF;iBACF,CACA;YACH,CAAC,CAAC;QACJ,CAAC;QACD,SAAS,EAAE,CAAC,QAAQ,EAAE,eAAe,CAAC;KACvC;CACF;;;;;;;;;;;;;;;;;;;;AChJ2F;AAC7B;;AAExD,MAAM,aAAa;IAIxB,YACE,aAAqB,EACrB,KAAa;QAEb,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;CACF;AAEM,MAAM,OAAQ,SAAQ,aAAa;IAIxC,YAAY,KAAa,EAAE,OAAe,EAAE,KAAa;QACvD,KAAK,CAAC,yGAA0B,EAAE,KAAK,CAAC,CAAC;QACzC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QAClB,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC;IACtB,CAAC;CACF;AAED,MAAM,OAAQ,SAAQ,aAAa;IAIjC,YAAY,WAAmB,EAAE,KAAa,EAAE,IAAa;QAC3D,KAAK,CAAC,4EAAiB,EAAE,KAAK,CAAC,CAAC;QAChC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC;IACxB,CAAC;CACF;AAYD,SAAS,UAAU,CAAI,CAAS,IAAS,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAC,CAAC;AAAA,CAAC;AAK5D,MAAM,eAAe;IAH5B;QAKU,OAAE,GAAc;YACtB,YAAY,EAAE;gBACZ,EAAE,EAAE,YAAY;gBAChB,KAAK,EAAE,aAAa;gBACpB,QAAQ,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;aAC1B;YACD,GAAG,EAAE;gBACH,EAAE,EAAE,GAAG;gBACP,KAAK,EAAE,SAAS;gBAChB,MAAM,EAAE,YAAY;gBACpB,QAAQ,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAE,gBAAgB,CAAC;aACjD;YACD,GAAG,EAAE;gBACH,EAAE,EAAE,GAAG;gBACP,MAAM,EAAE,OAAO;gBACf,KAAK,EAAE,SAAS;gBAChB,QAAQ,EAAE,EAAE;aACb;YACD,GAAG,EAAE;gBACH,EAAE,EAAE,GAAG;gBACP,MAAM,EAAE,OAAO;gBACf,KAAK,EAAE,SAAS;gBAChB,QAAQ,EAAE,EAAE;aACb;YACD,gBAAgB,EAAE;gBAChB,EAAE,EAAE,gBAAgB;gBACpB,KAAK,EAAE,aAAa;gBACpB,MAAM,EAAE,GAAG;gBACX,SAAS,EAAE,IAAI,OAAO,CACpB,gBAAgB,EAChB;;;;;;;;;;;;;;;;yBAgBiB,EACjB,aAAa,CAAC;gBAChB,QAAQ,EAAE,EAAE;aACb;YACD,qBAAqB,EAAE;gBACrB,EAAE,EAAE,qBAAqB;gBACzB,KAAK,EAAE,wBAAwB;gBAC/B,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE,IAAI,OAAO,CACpB,qBAAqB;gBAC7B,iEAAiE;gBACjE,iDAAiD;gBACjD,qDAAqD;gBACrD,8DAA8D;gBAC9D,kDAAkD;gBAClD,uDAAuD;gBACvD,yDAAyD;gBACzD,yEAAyE;gBACzE,2DAA2D;gBAC3D,yDAAyD;gBACzD,uDAAuD;gBACvD,6CAA6C;gBAC7C,wDAAwD;gBACxD,2DAA2D;gBAC3D,wDAAwD;gBACxD,mDAAmD;gBACnD,uDAAuD;gBACvD,uDAAuD;gBACvD,uDAAuD;gBACvD,2DAA2D;gBAC3D,6DAA6D;gBAC7D,yDAAyD;gBACzD,eAAe;gBACf,KAAK;gBACL,yBAAyB;gBACzB,KAAK;gBACL,WAAW;gBACX,2DAA2D;gBAC3D,mDAAmD;gBACnD,6DAA6D;gBAC7D,cAAc;gBACd;;;;;;;;;;;;;;;;;;;;;;wCAsBwC,EACtC,wBAAwB,CAAC;gBACrB,QAAQ,EAAE,EAAE;aACb;YACD,QAAQ,EAAE;gBACR,EAAE,EAAE,QAAQ;gBACZ,KAAK,EAAE,0BAA0B;gBACjC,MAAM,EAAE,GAAG;gBACX,SAAS,EAAE,IAAI,OAAO,CACpB,eAAe,EACf;;;;;;;;;;;;;;;;;;;;;;;;6BAwBqB,EACrB,0BAA0B,CAAC;gBAC7B,QAAQ,EAAE,CAAC,qBAAqB,CAAC;aAClC;YACD,iBAAiB,EAAE;gBACjB,EAAE,EAAE,iBAAiB;gBACrB,KAAK,EAAE,oBAAoB;gBAC3B,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE,IAAI,OAAO,CACpB,YAAY,EACZ;;;;;;;;;;;;;SAaC,EAAE,oBAAoB,CAAC;gBAC1B,QAAQ,EAAE,EAAE;aACb;YACD,QAAQ,EAAE;gBACR,EAAE,EAAE,QAAQ;gBACZ,KAAK,EAAE,wBAAwB;gBAC/B,MAAM,EAAE,GAAG;gBACX,SAAS,EAAE,IAAI,OAAO,CACpB,QAAQ,EACR;;;;;;;;;;;;;;;;;;;;;;;;4BAwBoB,EACxB,wBAAwB,CAAC;gBACvB,QAAQ,EAAE,CAAC,iBAAiB,CAAC;aAC9B;SACF,CAAC;KAiCH;IA/BC,YAAY;QACV,OAAO,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC;aACvB,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC;IAC3C,CAAC;IAED,IAAI,CAAC,EAAiB;QACpB,IAAI,CAAC,EAAE,EAAE;YAAE,OAAO,EAAE,CAAC;SAAE;QACvB,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC;QAC5C,IAAI,MAAM,KAAK,SAAS,EAAE;YAAE,OAAO,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;SAAE;QACrD,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;IAC/C,CAAC;IAED,UAAU,CAAC,EAAiB;QAC1B,IAAI,CAAC,EAAE,EAAE;YAAE,OAAO,EAAE,UAAU,EAAE,EAAE,EAAE,CAAC;SAAE;QAEvC,MAAM,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACtB,IAAI,CAAC,KAAK,SAAS,EAAE;YAAE,OAAO,EAAE,UAAU,EAAE,EAAE,EAAE,CAAC;SAAE;QAEnD,MAAM,kBAAkB,GAAG,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aACjE,GAAG,CAAC,CAAC,EAAE,UAAU,EAAE,EAAE,EAAE,CAAC,UAAU,CAAC;aACnC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,CAClC;QAEH,MAAM,SAAS,GAAG,CAAC,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QACjE,OAAO,EAAE,UAAU,EAAE,CAAC,GAAG,SAAS,EAAE,GAAG,kBAAkB,CAAC,EAAE,CAAC;IAC/D,CAAC;IAED,IAAI,CAAC,EAAU;QACb,OAAO,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACrB,CAAC;;8EA5OU,eAAe;gHAAf,eAAe,WAAf,eAAe,mBAFd,MAAM;;;;;;;;;;;;;;;ACzEpB;;;;;;;;;;;;;;;;;;GAkBG;AAEH,gFAAgF;AAChF,mEAAmE;AACnE,gEAAgE;AAEzD,MAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;CAClB,CAAC;AAEF;;;;;;GAMG;AACH,sEAAsE;;;;;;;;;;;;;;;;ACnCtE;;;;;;;;;;;;;;;;;;GAkBG;;AAE4C;AAGF;AACY;AAEzD,IAAI,6EAAsB,EAAE;IAC1B,6DAAc,EAAE,CAAC;CAClB;AAED,wEAAwB,CAAC,eAAe,CAAC,sDAAS,CAAC;KAChD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/components/editor/editor.component.ts","./src/app/components/editor/editor.component.html","./src/app/components/golden-layout/base-component.directive.ts","./src/app/components/golden-layout/golden-layout-host/golden-layout-host.component.ts","./src/app/components/golden-layout/golden-layout.service.ts","./src/app/components/monaco-editor/editor-config.service.ts","./src/app/components/monaco-editor/monaco-editor.component.ts","./src/app/components/offcanvas/offcanvas.component.ts","./src/app/components/offcanvas/offcanvas.component.html","./src/app/components/osd/osd.component.ts","./src/app/components/osd/osd.component.html","./src/app/components/test-component/test-component.component.ts","./src/app/components/test-component/test-component.component.html","./src/app/components/tree-view/tree-view.component.ts","./src/app/components/tree-view/tree-view.component.html","./src/app/pages/layout/layout.component.ts","./src/app/pages/layout/layout.component.html","./src/app/pages/login-page/login-page.component.ts","./src/app/pages/login-page/login-page.component.html","./src/app/pages/test-page/test-page.component.ts","./src/app/pages/test-page/test-page.component.html","./src/app/pages/working-unit/working-unit.component.ts","./src/app/pages/working-unit/working-unit.component.html","./src/app/pages/working-units/working-units.component.ts","./src/app/pages/working-units/working-units.component.html","./src/app/services/languages.service.ts","./src/app/services/mock-data.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LoginPageComponent } from './pages/login-page/login-page.component';\nimport { TestPageComponent } from './pages/test-page/test-page.component';\nimport { WorkingUnitComponent } from './pages/working-unit/working-unit.component';\nimport { WorkingUnitsComponent } from './pages/working-units/working-units.component';\n\nconst routes: Routes = [\n  { path: 'login', component: LoginPageComponent },\n  { path: 'working-units', component: WorkingUnitsComponent },\n  { path: 'working-unit/:id', component: WorkingUnitComponent },\n  { path: 'test', component: TestPageComponent },\n  { path: '**', component: TestPageComponent },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { useHash: true })],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { Component } from '@angular/core';\nimport { NEVER, Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { TreeViewItem, TreeViewProvider } from './components/tree-view/tree-view.component';\nimport { MockDataService } from './services/mock-data.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'cophi-ui';\n\n  treeItems: Observable<TreeViewItem[]>;\n  treeProvider: TreeViewProvider;\n\n  constructor(\n    private mockDB: MockDataService,\n  ) {\n\n    this.treeItems = of(this.mockDB.rootElements()).pipe(\n      map((x) => x.map(({ id, label, children }) => ({ id, label, children } as TreeViewItem))),\n    );\n\n    this.treeProvider = {\n      getItem: (id: string) => {\n        const di = this.mockDB.item(id);\n        if (di === undefined) { return NEVER; }\n        return of({ label: di.label, children: di.children } as TreeViewItem);\n      }\n    }\n  }\n}\n","<!-- \n  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n  \n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation; either\n  version 2.1 of the License, or any later version.\n  \n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  \n  You should have received a copy of the GNU Lesser General Public\n  License along with this library; if not, write to the Free Software\n  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n  USA\n -->\n <router-outlet></router-outlet>\n<!-- <app-tree-view *ngFor=\"let i of treeItems | async\" [model]=\"i\" [dataProvider]=\"treeProvider\"></app-tree-view>\n<div style=\"width: 1000px; height: 600px;\">\n  <app-golden-layout-host></app-golden-layout-host>\n</div> -->\n\n\n","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { AppRoutingModule } from './app-routing.module';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { GoldenLayoutService } from './components/golden-layout/golden-layout.service';\n\nimport { AppComponent } from './app.component';\nimport { EditorComponent } from './components/editor/editor.component';\nimport { OsdComponent } from './components/osd/osd.component';\nimport { GoldenLayoutHostComponent } from './components/golden-layout/golden-layout-host/golden-layout-host.component';\nimport { MonacoEditorComponent } from './components/monaco-editor/monaco-editor.component';\nimport { TreeViewComponent } from './components/tree-view/tree-view.component';\nimport { LayoutComponent } from './pages/layout/layout.component';\nimport { OffcanvasComponent } from './components/offcanvas/offcanvas.component';\nimport { LoginPageComponent } from './pages/login-page/login-page.component';\nimport { TestPageComponent } from './pages/test-page/test-page.component';\nimport { WorkingUnitsComponent } from './pages/working-units/working-units.component';\nimport { WorkingUnitComponent } from './pages/working-unit/working-unit.component';\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    EditorComponent,\n    GoldenLayoutHostComponent,\n    OsdComponent,\n    MonacoEditorComponent,\n    TreeViewComponent,\n    LayoutComponent,\n    OffcanvasComponent,\n    LoginPageComponent,\n    TestPageComponent,\n    WorkingUnitsComponent,\n    WorkingUnitComponent,\n  ],\n  imports: [\n    AppRoutingModule,\n    BrowserModule,\n    FormsModule,\n    HttpClientModule,\n  ],\n  providers: [\n    GoldenLayoutService,\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {\n}\n","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { Component, ElementRef, Inject } from '@angular/core';\nimport { ComponentContainer } from 'golden-layout';\nimport { BaseComponentDirective } from '../golden-layout/base-component.directive';\n\n@Component({\n  selector: 'app-editor',\n  templateUrl: './editor.component.html',\n  styleUrls: ['./editor.component.scss']\n})\nexport class EditorComponent extends BaseComponentDirective {\n\n  editorOptions = {\n    theme: 'vs-dark',\n    language: 'javascript',\n    minimap: { enabled: false },\n  }; // TODO: remove this example options with a default\n  code: string = 'function x() {\\nconsole.log(\"Hello world!\");\\n}'; // TODO: remove me\n\n  editorHandle: any;\n\n  constructor(\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer,\n    elRef: ElementRef,\n  ) {\n    super(elRef.nativeElement);\n  }\n\n  f(e: any) { // TODO: check race conditions on initialisation\n    this.editorHandle = e;\n  }\n\n}\n","<!-- \n  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n  \n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation; either\n  version 2.1 of the License, or any later version.\n  \n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  \n  You should have received a copy of the GNU Lesser General Public\n  License along with this library; if not, write to the Free Software\n  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n  USA\n -->\n\n<app-monaco-editor></app-monaco-editor>","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { Directive, InjectionToken } from '@angular/core';\nimport {\n    ComponentContainer\n} from \"golden-layout\";\n  \n@Directive()\nexport abstract class BaseComponentDirective {\n    constructor(public rootHtmlElement: HTMLElement) {\n\n    }\n\n    setPositionAndSize(left: number, top: number, width: number, height: number) {\n        this.rootHtmlElement.style.left = this.numberToPixels(left);\n        this.rootHtmlElement.style.top = this.numberToPixels(top);\n        this.rootHtmlElement.style.width = this.numberToPixels(width);\n        this.rootHtmlElement.style.height = this.numberToPixels(height);\n    } \n\n    setVisibility(visible: boolean) {\n        if (visible) {\n            this.rootHtmlElement.style.display = '';\n        } else {\n            this.rootHtmlElement.style.display = 'none';\n        }\n    }\n\n    setZIndex(value: string) {\n        this.rootHtmlElement.style.zIndex = value;\n    }\n\n    private numberToPixels(value: number): string {\n        return value.toString(10) + 'px';\n    }\n}\n\nexport namespace BaseComponentDirective {\n    const GoldenLayoutContainerTokenName = 'GoldenLayoutContainer'; \n    export const GoldenLayoutContainerInjectionToken = new InjectionToken<ComponentContainer>(GoldenLayoutContainerTokenName);\n}\n","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { ApplicationRef, Component, ComponentRef, ElementRef, EmbeddedViewRef, EventEmitter, Input, OnDestroy, Output, ViewChild, ViewContainerRef } from '@angular/core';\nimport {\n  ComponentContainer, GoldenLayout,\n  LayoutConfig,\n  LogicalZIndex,\n  ResolvedComponentItemConfig\n} from \"golden-layout\";\nimport { extend } from 'openseadragon';\nimport { Subject } from 'rxjs';\nimport { takeUntil, tap } from 'rxjs/operators';\nimport { ComponentInfo } from 'src/app/services/mock-data.service';\nimport { EditorComponent } from '../../editor/editor.component';\nimport { MonacoEditorComponent } from '../../monaco-editor/monaco-editor.component';\nimport { OsdComponent } from '../../osd/osd.component';\nimport { TestComponentComponent } from '../../test-component/test-component.component';\nimport { BaseComponentDirective } from '../base-component.directive';\nimport { GoldenLayoutService } from '../golden-layout.service';\n\n@Component({\n  selector: 'app-golden-layout-host',\n  template: '<ng-template #componentViewContainer></ng-template>',\n  styleUrls: ['./golden-layout-host.component.scss'],\n})\nexport class GoldenLayoutHostComponent implements OnDestroy {\n  @Output() ready = new EventEmitter<GoldenLayoutHostComponent>();\n\n  private _goldenLayout!: GoldenLayout;\n  private _goldenLayoutElement: HTMLElement;\n  private _componentRefMap = new Map<ComponentContainer, ComponentRef<BaseComponentDirective>>();\n  private _goldenLayoutBoundingClientRect: DOMRect = new DOMRect();\n\n  private _goldenLayoutBindComponentEventListener =\n    (container: ComponentContainer, itemConfig: ResolvedComponentItemConfig) => this.handleBindComponentEvent(container, itemConfig);\n  private _goldenLayoutUnbindComponentEventListener =\n    (container: ComponentContainer) => this.handleUnbindComponentEvent(container);\n\n  @ViewChild('componentViewContainer', { read: ViewContainerRef, static: true })\n  private _componentViewContainerRef!: ViewContainerRef;\n\n  get goldenLayout() { return this._goldenLayout; }\n  get isGoldenLayoutSubWindow() { return this._goldenLayout.isSubWindow; }\n\n  private _windowResizeListener = () => this.handleWindowResizeEvent();\n\n  private destroy = new Subject();\n\n  public saveLayout$ = new Subject();\n  public loadLayout$ = new Subject();\n  public addComponent$ = new Subject<[string, any]>() // component name, params\n\n  private saveLayoutCmd = this.saveLayout$.pipe(\n    tap(() => this.saveLayout()),\n    takeUntil(this.destroy),\n  );\n\n  private loadLayoutCmd = this.loadLayout$.pipe(\n    tap(() => this.loadLayout()),\n    takeUntil(this.destroy),\n  );\n\n  private addComponentCmd = this.addComponent$.pipe(\n    tap((x) => console.log(x)),\n    tap(([name, params]) => this.add(name, params)),\n    takeUntil(this.destroy),\n  );\n\n  constructor(private _appRef: ApplicationRef,\n    private _elRef: ElementRef<HTMLElement>,\n    private goldenLayoutComponentService: GoldenLayoutService,\n  ) {\n    this._goldenLayoutElement = this._elRef.nativeElement;\n\n    this.goldenLayoutComponentService.registerComponentType(OsdComponent.name, OsdComponent);\n    this.goldenLayoutComponentService.registerComponentType(TestComponentComponent.name, TestComponentComponent);\n    this.goldenLayoutComponentService.registerComponentType(MonacoEditorComponent.name, MonacoEditorComponent);\n    this.goldenLayoutComponentService.registerComponentType(EditorComponent.name, EditorComponent);\n\n    this.saveLayoutCmd.subscribe();\n    this.loadLayoutCmd.subscribe();\n    this.addComponentCmd.subscribe((x) => console.log('add', x));\n\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => { // TODO: try to remove settimeout\n      this.initialise();\n\n      globalThis.addEventListener('resize', this._windowResizeListener);\n\n      this.add(MonacoEditorComponent.name, { lang: 'gs-lit', title: 'GSLIT', code: 'LIT' });\n\n      this.add(MonacoEditorComponent.name, { lang: 'CustomLang', title: 'My Title 1', code: 'Custom 1' });\n      this.add(MonacoEditorComponent.name, { lang: 'ppp', title: 'My Title 2', code: 'PPP 1' });\n      // this.add(MonacoEditorComponent.name, { lang: 'CustomLang', title: 'My Title 3', code: 'Custom 2' });\n      // this.add(MonacoEditorComponent.name, { lang: 'CustomLang', title: 'My Title 4', code: 'Custom 3' });\n\n      setTimeout(() => this.resizeGoldenLayout(), 3000);\n      this._goldenLayout.emit('resize');\n      this.ready.next(this);\n    }, 0);\n\n  }\n\n  private saveLayout() {\n    const rlc = this._goldenLayout.saveLayout();\n    const lc = LayoutConfig.fromResolved(rlc);\n    localStorage.setItem('glc', JSON.stringify(lc))\n  }\n\n  private loadLayout() {\n    const lc: LayoutConfig = JSON.parse(localStorage.getItem('glc') || '');\n    this._goldenLayout.loadLayout(lc);\n  }\n\n  ngOnDestroy() {\n    globalThis.removeEventListener('resize', this._windowResizeListener);\n    this._goldenLayout.destroy();\n  }\n\n  private handleWindowResizeEvent() { this.resizeGoldenLayout(); }\n\n  resizeGoldenLayout() {\n    const { offsetWidth, offsetHeight } = this._elRef.nativeElement.parentElement ?? { offsetHeight: 0, offsetWidth: 0 };\n    this.setSize(offsetWidth, offsetHeight);\n  }\n\n  clear() {\n    this._goldenLayout.clear();\n  }\n\n  add(componentName: string, params: { title: string } & any): ComponentRef<BaseComponentDirective> {\n    const goldenLayoutComponent = this._goldenLayout.newComponent(componentName, undefined, params.title); // do not set state here\n    const componentRef = this.getComponentRef(goldenLayoutComponent.container);\n    if (componentRef === undefined) {\n      throw new Error('Unexpected error getting ComponentRef');\n    }\n\n    if (componentName === MonacoEditorComponent.name) { // TODO refactor this list of ifs\n      const c = componentRef.instance as MonacoEditorComponent;\n      c.lang = params.lang;\n      c.title = params.title;\n      c.code = params.code;\n    }\n\n    if (componentName === OsdComponent.name) {\n      const c = componentRef.instance as OsdComponent;\n      c.manifestURL = params.manifestURL; //'https://www.e-codices.unifr.ch/metadata/iiif/ubb-M-I-0018/manifest.json';\n    }\n\n    this.resizeGoldenLayout();\n    return componentRef;\n  }\n\n  initialise() {\n    this._goldenLayout = new GoldenLayout(\n      this._goldenLayoutElement,\n      this._goldenLayoutBindComponentEventListener,\n      this._goldenLayoutUnbindComponentEventListener,\n    );\n    this._goldenLayout.beforeVirtualRectingEvent = (count) => this.handleBeforeVirtualRectingEvent(count);\n\n    if (this._goldenLayout.isSubWindow) {\n      this._goldenLayout.checkAddDefaultPopinButton();\n    }\n  }\n\n  setSize(width: number, height: number) {\n    this._goldenLayout.setSize(width, height)\n  }\n\n  getComponentRef(container: ComponentContainer) {\n    return this._componentRefMap.get(container);\n  }\n\n  private handleBindComponentEvent(container: ComponentContainer, itemConfig: ResolvedComponentItemConfig): ComponentContainer.BindableComponent {\n    const componentType = itemConfig.componentType;\n    const componentRef = this.goldenLayoutComponentService.createComponent(componentType, container);\n    const component = componentRef.instance;\n\n    // TODO: manage state recovery after moving component\n    // const c = componentRef.instance as OsdComponent;\n    // c.manifestURL = 'https://www.e-codices.unifr.ch/metadata/iiif/bge-gr0044/manifest.json'\n\n    this._componentRefMap.set(container, componentRef);\n\n    container.virtualRectingRequiredEvent = (container, width, height) => this.handleContainerVirtualRectingRequiredEvent(container, width, height);\n    container.virtualVisibilityChangeRequiredEvent = (container, visible) => this.handleContainerVisibilityChangeRequiredEvent(container, visible);\n    container.virtualZIndexChangeRequiredEvent = (container, logicalZIndex, defaultZIndex) => this.handleContainerVirtualZIndexChangeRequiredEvent(container, logicalZIndex, defaultZIndex);\n\n    this._appRef.attachView(componentRef.hostView);\n    const componentRootElement = component.rootHtmlElement;\n    this._goldenLayoutElement.appendChild(componentRootElement);\n\n\n    return {\n      component,\n      virtual: true,\n    }\n  }\n\n  private handleUnbindComponentEvent(container: ComponentContainer) {\n    const componentRef = this._componentRefMap.get(container);\n    if (componentRef === undefined) {\n      throw new Error('Could not unbind component. Container not found');\n    }\n    this._componentRefMap.delete(container);\n\n    const hostView = componentRef.hostView;\n\n    const component = componentRef.instance;\n    const componentRootElement = component.rootHtmlElement;\n    this._goldenLayoutElement.removeChild(componentRootElement);\n    this._appRef.detachView(hostView);\n\n    componentRef.destroy();\n  }\n\n  private handleBeforeVirtualRectingEvent(count: number) {\n    this._goldenLayoutBoundingClientRect = this._goldenLayoutElement.getBoundingClientRect();\n  }\n\n  private handleContainerVirtualRectingRequiredEvent(container: ComponentContainer, width: number, height: number) {\n    const containerBoundingClientRect = container.element.getBoundingClientRect();\n    const left = containerBoundingClientRect.left - this._goldenLayoutBoundingClientRect.left;\n    const top = containerBoundingClientRect.top - this._goldenLayoutBoundingClientRect.top;\n\n    const componentRef = this._componentRefMap.get(container);\n    if (componentRef === undefined) {\n      throw new Error('handleContainerVirtualRectingRequiredEvent: ComponentRef not found');\n    }\n    const component = componentRef.instance;\n    component.setPositionAndSize(left, top, width, height);\n  }\n\n  private handleContainerVisibilityChangeRequiredEvent(container: ComponentContainer, visible: boolean) {\n    const componentRef = this._componentRefMap.get(container);\n    if (componentRef === undefined) {\n      throw new Error('handleContainerVisibilityChangeRequiredEvent: ComponentRef not found');\n    }\n    const component = componentRef.instance;\n    component.setVisibility(visible);\n  }\n\n  private handleContainerVirtualZIndexChangeRequiredEvent(container: ComponentContainer, logicalZIndex: LogicalZIndex, defaultZIndex: string) {\n    const componentRef = this._componentRefMap.get(container);\n    if (componentRef === undefined) {\n      throw new Error('handleContainerVirtualZIndexChangeRequiredEvent: ComponentRef not found');\n    }\n    const component = componentRef.instance;\n    component.setZIndex(defaultZIndex);\n  }\n}\n","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { ComponentFactoryResolver, Injectable, Injector, StaticProvider, Type } from '@angular/core';\nimport { ComponentContainer, JsonValue } from \"golden-layout\";\nimport { EditorComponent } from '../editor/editor.component';\nimport { MonacoEditorComponent } from '../monaco-editor/monaco-editor.component';\nimport { OsdComponent } from '../osd/osd.component';\nimport { TestComponentComponent } from '../test-component/test-component.component';\nimport { BaseComponentDirective } from './base-component.directive';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GoldenLayoutService {\n  private _componentTypeMap = new Map<string, Type<BaseComponentDirective>>()\n\n  private availableComponents = [\n    OsdComponent,\n    TestComponentComponent,\n    MonacoEditorComponent,\n    EditorComponent,\n  ]\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n  ) {\n    this.availableComponents.forEach((c) => this.registerComponentType(c.name, c));\n  }\n\n  registerComponentType(name: string, componentType: Type<BaseComponentDirective>) {\n    this._componentTypeMap.set(name, componentType);\n  }\n\n  getRegisteredComponentTypeNames(): string[] {\n    const count = this._componentTypeMap.size;\n    const result = new Array<string>(count);\n    let idx = 0;\n    for (let [key, value] of this._componentTypeMap) {\n      result[idx++] = key;\n    }\n    return result;\n  }\n\n  createComponent(componentTypeJsonValue: JsonValue, container: ComponentContainer) { // TODO: check if this is still needed or used\n    const componentType = this._componentTypeMap.get(componentTypeJsonValue as string);\n    if (componentType === undefined) {\n      throw new Error('Unknown component type')\n    } else {\n      const provider: StaticProvider = { provide: BaseComponentDirective.GoldenLayoutContainerInjectionToken, useValue: container };\n      const injector = Injector.create({\n        providers: [provider]\n      });\n      const componentFactoryRef = this.componentFactoryResolver.resolveComponentFactory<BaseComponentDirective>(componentType);\n      return componentFactoryRef.create(injector);\n    }\n  }\n}\n","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\n/// <reference path=\"../../../../node_modules/monaco-editor/monaco.d.ts\" />\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EditorConfigService {\n\n  constructor() { }\n\n  // get monaco.languages.ILanguageExtensionPoint Object for 'CustomLang' Lanaguage\n  public getCustomLangExtensionPoint(): monaco.languages.ILanguageExtensionPoint {\n    const newLanguage: monaco.languages.ILanguageExtensionPoint = {\n      id: 'CustomLang'\n    };\n    return newLanguage;\n  }\n\n  // get IMonarchTokenProvider object for 'CustomLang' Language\n  // This object defines the rules for syntax highlighting\n  public getCustomLangTokenProviders(): any {\n    return <any>{\n      // Set defaultToken to invalid to see what you do not tokenize yet\n      // defaultToken: 'invalid',\n\n      keywords: [\n        'abstract', 'continue', 'for', 'new', 'switch', 'assert', 'goto', 'do',\n        'if', 'private', 'this', 'break', 'protected', 'throw', 'else', 'public',\n        'enum', 'return', 'catch', 'try', 'interface', 'static', 'class',\n        'finally', 'const', 'super', 'while', 'true', 'false'\n      ],\n\n      typeKeywords: [\n        'boolean', 'double', 'byte', 'int', 'short', 'char', 'void', 'long', 'float'\n      ],\n\n      operators: [\n        '=', '>', '<', '!', '~', '?', ':', '==', '<=', '>=', '!=',\n        '&&', '||', '++', '--', '+', '-', '*', '/', '&', '|', '^', '%',\n        '<<', '>>', '>>>', '+=', '-=', '*=', '/=', '&=', '|=', '^=',\n        '%=', '<<=', '>>=', '>>>='\n      ],\n\n      // we include these common regular expressions\n      symbols: /[=><!~?:&|+\\-*\\/\\^%]+/,\n\n      // C# style strings\n      escapes: /\\\\(?:[abfnrtv\\\\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,\n\n      // The main tokenizer for our languages\n      tokenizer: {\n        root: [\n          // identifiers and keywords\n          [/[a-z_$][\\w$]*/, {\n            cases: {\n              '@typeKeywords': 'keyword',\n              '@keywords': 'keyword',\n              '@default': 'identifier'\n            }\n          }],\n          [/[A-Z][\\w\\$]*/, 'type.identifier'],  // to show class names nicely\n\n          // whitespace\n          { include: '@whitespace' },\n\n          // delimiters and operators\n          [/[{}()\\[\\]]/, '@brackets'],\n          [/[<>](?!@symbols)/, '@brackets'],\n          [/@symbols/, {\n            cases: {\n              '@operators': 'operator',\n              '@default': ''\n            }\n          }],\n\n          // @ annotations.\n          // As an example, we emit a debugging log message on these tokens.\n          // Note: message are supressed during the first load -- change some lines to see them.\n          [/@\\s*[a-zA-Z_\\$][\\w\\$]*/, { token: 'annotation', log: 'annotation token: $0' }],\n\n          // numbers\n          [/\\d*\\.\\d+([eE][\\-+]?\\d+)?/, 'number.float'],\n          [/0[xX][0-9a-fA-F]+/, 'number.hex'],\n          [/\\d+/, 'number'],\n\n          // delimiter: after number because of .\\d floats\n          [/[;,.]/, 'delimiter'],\n\n          // strings\n          [/\"([^\"\\\\]|\\\\.)*$/, 'string.invalid'],  // non-teminated string\n          [/\"/, { token: 'string.quote', bracket: '@open', next: '@string' }],\n\n          // characters\n          [/'[^\\\\']'/, 'string'],\n          [/(')(@escapes)(')/, ['string', 'string.escape', 'string']],\n          [/'/, 'string.invalid']\n        ],\n\n        comment: [\n          [/[^\\/*]+/, 'comment'],\n          [/\\/\\*/, 'comment', '@push'],    // nested comment\n          ['\\\\*/', 'comment', '@pop'],\n          [/[\\/*]/, 'comment']\n        ],\n\n        string: [\n          [/[^\\\\\"]+/, 'string'],\n          [/@escapes/, 'string.escape'],\n          [/\\\\./, 'string.escape.invalid'],\n          [/\"/, { token: 'string.quote', bracket: '@close', next: '@pop' }]\n        ],\n\n        whitespace: [\n          [/[ \\t\\r\\n]+/, 'white'],\n          [/\\/\\*/, 'comment', '@comment'],\n          [/\\/\\/.*$/, 'comment'],\n        ],\n      },\n    };\n  }\n\n  // get the Color coding theme object for CustomLang language\n  public getCustomLangTheme(): monaco.editor.IStandaloneThemeData {\n    return {\n      base: 'vs',\n      inherit: false,\n      rules: [\n        { token: 'comment', foreground: '3f7f5f' },\n        { token: 'string', foreground: '2A00FF' },\n        { token: 'keyword', foreground: '7F0055' },\n        { token: 'STATEMENTS', foreground: '7F0055' },\n        { token: 'CONSTANTS', foreground: '7F0055' },\n        { token: 'TYPES', foreground: 'cd3a3a' },\n        { token: 'operator', foreground: '000000' },\n        { token: 'identifier', foreground: '000000' },\n        { token: '@brackets', foreground: '000000' },\n        { token: 'annotation', foreground: 'B22222' },\n      ],\n      colors: {}\n    };\n  }\n}","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\n/// <reference path=\"../../../../node_modules/monaco-editor/monaco.d.ts\" />\nimport { AfterViewInit, Component, ElementRef, forwardRef, Input, OnDestroy, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Error } from 'cophi-lang';\nimport { BehaviorSubject, combineLatest, from, NEVER, Observable, Subject } from 'rxjs';\nimport { debounceTime, map, startWith, switchMap, take, takeUntil, tap } from 'rxjs/operators';\nimport { coherenceChecks, langData, LanguageDefinition, LanguagesService, ModelChangeEvent } from 'src/app/services/languages.service';\nimport { BaseComponentDirective } from '../golden-layout/base-component.directive';\nimport { EditorConfigService } from './editor-config.service';\n\nlet loadedMonaco = false;\nlet loadPromise: Promise<void>;\n\ninterface Markers {\n  model: monaco.editor.ITextModel;\n  lang: LanguageDefinition;\n  errors: monaco.editor.IMarkerData[];\n}\n\n@Component({\n  selector: 'app-monaco-editor',\n  templateUrl: './monaco-editor.component.html',\n  styleUrls: ['./monaco-editor.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => EditorConfigService),\n      multi: true,\n    }\n  ]\n})\nexport class MonacoEditorComponent extends BaseComponentDirective implements AfterViewInit, OnDestroy {\n\n  @Input() title = 'Monaco Editor';\n  @ViewChild('editorContainer', { static: true }) editorContainer!: ElementRef;\n  editor!: monaco.editor.IStandaloneCodeEditor;\n  options: monaco.editor.IStandaloneDiffEditorConstructionOptions = {};\n\n  codeChange = new BehaviorSubject<string>('');\n  @Input() set code(v: string) { this.codeChange.next(v); }\n  get code() { return this.codeChange.value; }\n\n  @Input() lang: string = 'gs-lit';\n\n  private destroy = new Subject();\n\n  private readonly ERROR_CHECK_DELAY = 1000; // the delay to wait after editor text has changed befoare updating errors\n\n  editorModelChange = new Subject<ModelChangeEvent>();\n\n  errors = this.editorModelChange.pipe(  // TODO simplify\n    debounceTime(this.ERROR_CHECK_DELAY),\n    switchMap(({ model, lang }) => (lang.errorProvider(model) as Promise<monaco.editor.IMarkerData[]>).then((errors) => ({ model, lang, errors }))),\n    takeUntil(this.destroy),\n  );\n\n  checkChoerence = new Subject();\n\n  warningsInput = new BehaviorSubject<Error[]>([]);\n\n  warnings = this.warningsInput.pipe(\n    map((x) => x.map(({ message, range: { start, end } }) => (\n      {\n        code: 'test',\n        startLineNumber: start.line,\n        startColumn: start.column,\n        endLineNumber: end.line,\n        endColumn: end.column,\n        message,\n        severity: monaco.MarkerSeverity.Warning,\n      } as monaco.editor.IMarkerData\n    ))),\n    startWith<monaco.editor.IMarkerData[]>([]),\n    takeUntil(this.destroy),\n  ); // TODO\n\n  errorsInfo = combineLatest([this.warnings, this.errors]).pipe(\n    map(([warns, { errors, lang, model }]) => ({ lang, model, errors: [...errors, ...warns] })),\n  )\n\n  constructor(\n    private el: ElementRef,\n    private langService: LanguagesService,\n  ) {\n    super(el.nativeElement);\n    this.editorModelChange.pipe(takeUntil(this.destroy)).subscribe((m) => this.code = m.model.getValue());\n\n    this.errorsInfo.subscribe(({ errors }) => { // TODO: simplify\n      const model = this.editor?.getModel();\n      if (!!model) {\n        monaco.editor.setModelMarkers(model, this.lang, errors)\n      }\n    });\n\n    this.warnings.subscribe((warns) => {\n      const model = this.editor?.getModel();\n      if (!!model) {\n        monaco.editor.setModelMarkers(model, this.lang, warns);\n      }\n    }); //TODO: remove me\n  }\n\n  ngOnChanges() { // TODO: check if still needed\n    if (this.editor) {\n      this.editor.setValue(this.code);\n    }\n  }\n\n  ngAfterViewInit(): void {\n    if (loadedMonaco) {\n      // Wait until monaco editor is available\n      loadPromise.then(() => {\n        this.initMonaco();\n      });\n    } else {\n      loadedMonaco = true;\n      loadPromise = new Promise<void>((resolve: any) => {\n        if (typeof ((<any>window).monaco) === 'object') {\n          resolve();\n          return;\n        }\n        const onAmdLoader: any = () => {\n          // Load monaco\n          (<any>window).require.config({ paths: { 'vs': 'assets/monaco/min/vs' } });\n\n          (<any>window).require(['vs/editor/editor.main'], () => {\n            this.initMonaco();\n            resolve();\n          });\n        };\n\n        // Load AMD loader if necessary\n        if (!(<any>window).require) {\n          const loaderScript: HTMLScriptElement = document.createElement('script');\n          loaderScript.type = 'text/javascript';\n          loaderScript.src = 'assets/monaco/min/vs/loader.js';\n          loaderScript.addEventListener('load', onAmdLoader);\n          document.body.appendChild(loaderScript);\n        } else {\n          onAmdLoader();\n        }\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy.next();\n    this.destroy.complete();\n\n    // if (this.editor !== undefined) {\n    //   this.editor.dispose();\n    // }\n  }\n\n  initMonaco(options: monaco.editor.IStandaloneDiffEditorConstructionOptions = {}) {\n    console.log(\"LANG\", this.lang, \"LL\", langData[this.lang])\n    this.langService.registerLanguage(langData[this.lang], this.editorModelChange);\n    this.editor = monaco.editor.create(this.el.nativeElement, {\n      value: this.code,\n      language: this.lang,\n      theme: 'vs-dark',\n      automaticLayout: true,\n      fontFamily: 'IFAOGrec',\n      lineNumbers: 'off',\n      minimap: { enabled: false },\n    });\n  }\n\n}\n\n","import { AfterViewInit, Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\nimport * as bootstrap from 'bootstrap';\nimport { NEVER, never, Observable, Subject, Subscription } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-offcanvas',\n  templateUrl: './offcanvas.component.html',\n  styleUrls: ['./offcanvas.component.scss']\n})\nexport class OffcanvasComponent implements AfterViewInit {\n\n  @ViewChild('offcanvas', { static: true }) offcanvasElement!: ElementRef;\n  offcanvas!: bootstrap.Offcanvas;\n\n  @Input() header: string | undefined\n  @Input() position: 'start' | 'end' | 'top' | 'bottom' = 'start'\n  private _openEvents: Observable<any> = NEVER;\n  private s: Subscription = new Subscription();\n  @Input() set openEvents(v: Observable<any>) {\n    this._openEvents = v;\n    console.log(\"new open events!\", v);\n    this.s.unsubscribe();\n    this.s = this._openEvents.pipe(\n      tap(() => this.offcanvas.toggle()),\n      tap(() =>  console.log(\"HERE \")),\n    ).subscribe();\n  }\n  get openEvents() { return this._openEvents; } \n\n  ngAfterViewInit(): void {\n    this.offcanvas = new bootstrap.Offcanvas(this.offcanvasElement.nativeElement);\n  }\n}\n","<div class=\"offcanvas\" [class.offcanvas-start]=\"position == 'start'\" [class.offcanvas-end]=\"position == 'end'\"\n    [class.offcanvas-top]=\"position == 'top'\" [class.offcanvas-bottom]=\"position == 'bottom'\" tabindex=\"-1\"\n    id=\"offcanvas\" aria-labelledby=\"offcanvasLabel\" #offcanvas>\n    <div *ngIf=\"header !== undefined\" class=\"offcanvas-header\">\n        <h5 class=\"offcanvas-title\" id=\"offcanvasLabel\">{{header}}</h5>\n        <button type=\"button\" class=\"btn-close text-reset\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\n    </div>\n    <div class=\"offcanvas-body\">\n        <ng-content></ng-content>\n    </div>\n</div>","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { AfterViewInit, Component, ElementRef, EventEmitter, Inject, Input, NgZone, OnDestroy, Output, ViewChild } from '@angular/core';\n\nimport { HttpClient } from '@angular/common/http';\n\nimport { BehaviorSubject, combineLatest, Observable, Subscription } from 'rxjs';\nimport { distinctUntilChanged, filter, map, switchMap } from 'rxjs/operators';\nimport { v4 as uuidv4 } from 'uuid';\n\n// import * as OpenSeadragon from 'openseadragon';\nimport { BaseComponentDirective } from '../golden-layout/base-component.directive';\nimport { ComponentContainer } from 'golden-layout';\nimport * as OpenSeadragon from 'openseadragon';\nimport { Button, ControlAnchor } from 'openseadragon';\n\n/*\nFrom:\n{\n  \"@id\": \"https://www.e-codices.unifr.ch:443/loris/bge/bge-gr0044/bge-gr0044_e001.jp2/full/full/0/default.jpg\",\n  \"@type\": \"dctypes:Image\",\n  \"format\": \"image/jpeg\",\n  \"height\": 7304,\n  \"width\": 5472,\n  \"service\": {\n    \"@context\": \"http://iiif.io/api/image/2/context.json\",\n    \"@id\": \"https://www.e-codices.unifr.ch/loris/bge/bge-gr0044/bge-gr0044_e001.jp2\",\n    \"profile\": \"http://iiif.io/api/image/2/level2.json\"\n  }\n}\n\nTo:\n{\n  '@context': 'http://iiif.io/api/image/2/context.json',\n  '@id': 'https://www.e-codices.unifr.ch/loris/bge/bge-gr0044/bge-gr0044_e001.jp2',\n  'profile': ['http://iiif.io/api/image/2/level2.json'],\n  'protocol': 'http://iiif.io/api/image',\n  'height': 7304,\n  'width': 5472,\n}\n*/\nfunction manifestResourcetoTileSource(manifestResource: { service: { [x: string]: any; }; height: any; width: any; }) { // TODO: check if there is a manifest type already defined\n  return {\n    '@context': manifestResource.service['@context'],\n    '@id': manifestResource.service['@id'],\n    profile: [manifestResource.service['@profile']],\n    protocol: 'http://iiif.io/api/image',\n    height: manifestResource.height,\n    width: manifestResource.width,\n  };\n}\n\n@Component({\n  selector: 'app-osd',\n  templateUrl: './osd.component.html',\n  styleUrls: ['./osd.component.scss'],\n})\nexport class OsdComponent extends BaseComponentDirective implements AfterViewInit, OnDestroy {\n\n  @ViewChild('osd', { read: ElementRef, static: true })\n  div!: ElementRef;\n\n  private _options!: OpenSeadragon.Options;\n  @Input() set options(v) { // TODO: add interface to better type this object\n    if (v !== this._options) {\n      this._options = v;\n      this.optionsChange.next(this._options);\n    }\n  }\n  get options() { return this._options; }\n  optionsChange = new BehaviorSubject({});\n\n  private _manifestURL!: string;\n  @Input() set manifestURL(v: string) {\n    if (v !== this._manifestURL) {\n      this._manifestURL = v;\n      this.manifestURLChange.next(this._manifestURL);\n    }\n  }\n  get manifestURL() { return this._manifestURL; }\n  manifestURLChange = new BehaviorSubject<string | undefined>(undefined);\n\n  // tslint:disable-next-line: variable-name\n  private _page: number = 0; // TODO: check if 0 is a good initial value\n  @Input() set page(v: number) {\n    if (v !== this._page) {\n      this._page = v;\n      this.pageChange.next(this._page);\n    }\n  }\n  get page() { return this._page; }\n  @Output() pageChange = new EventEmitter<number>();\n\n  @Input() text: string = '';\n\n  tileSources: Observable<Array<OpenSeadragon.TileSource>> = this.manifestURLChange\n    .pipe(\n      filter((url) => !!url),\n      distinctUntilChanged(),\n      switchMap((url) => this.http.get<{ sequences: Partial<Array<{ canvases: any[] }>> }>(url!)), // TODO: check  if there is an already defined type for manifest\n      map((manifest) => manifest // get the resource fields in the manifest json structure\n        .sequences.map((seq) => seq!.canvases.map((canv) => canv.images).reduce((x, y) => x.concat(y), [])) // TODO: check if seq can be undefined\n        .reduce((x, y) => x.concat(y), []).map((res: { resource: any; }) => res.resource) // TODO: check if there is an already defined type for res\n        .map(manifestResourcetoTileSource),\n      ),\n    );\n\n  viewer!: OpenSeadragon.Viewer;\n  viewerId: string;\n\n  private subscriptions: Subscription[] = [];\n\n  constructor(\n    private http: HttpClient,\n    private ngZone: NgZone,\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer,\n    elRef: ElementRef,\n  ) {\n    super(elRef.nativeElement);\n    this.viewerId = uuidv4();\n    this.subscriptions.push(\n      this.pageChange.pipe(\n        distinctUntilChanged(),\n      ).subscribe((x) => {\n        if (!!this.viewer) {\n          this.viewer.goToPage(x - 1);\n        }\n      }));\n  }\n\n  ngAfterViewInit() {\n    const commonOptions = {\n      visibilityRatio: 0.1,\n      minZoomLevel: 0.5,\n      defaultZoomLevel: 1,\n      sequenceMode: true,\n      showRotationControl: true,\n      prefixUrl: 'assets/osd/images/',\n      element: this.div.nativeElement,\n      navigatorBackground: '#606060',\n      showNavigator: false,\n      gestureSettingsMouse: {\n        clickToZoom: false,\n        dblClickToZoom: true,\n      },\n    };\n\n    ;\n    this.subscriptions.push(combineLatest([this.optionsChange, this.tileSources])\n      .subscribe(([options, tileSources]) => {\n        this.viewer = this.ngZone.runOutsideAngular(() =>\n          OpenSeadragon({\n            ...commonOptions,\n            showFullPageControl: false,\n            ...(!!tileSources ? { tileSources } : options),\n          })\n        );\n\n\n        // this.viewer.addHandler('open', () => {\n        //   let printButton = new Button({\n        //     tooltip: 'Print',\n        //     srcRest: `/assets/osd/colors_invert_icon.png`,\n        //     srcGroup: `/assets/osd/colors_invert_icon.png`,\n        //     srcHover: `/assets/osd/colors_invert_icon.png`,\n        //     srcDown: `/assets/osd/colors_invert_icon.png`,\n        //     onClick: () => alert('hello'),\n        //   });\n\n        //   this.viewer.addControl(printButton.element, { anchor: ControlAnchor.TOP_LEFT });\n        // });\n\n\n        this.viewer.element.addEventListener('scroll', (e) => console.log('asdasasd', e));\n        this.viewer.addHandler('page', ({ page }) => this.pageChange.next(page! + 1)); // TODO: check undefined\n        ['focus', 'click', 'enter'].forEach((e) =>\n          this.viewer.addHandler(e as OpenSeadragon.ViewerEventName, (evt) => console.log(e, evt))\n        );\n      }));\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.forEach((s) => s.unsubscribe());\n  }\n}","<!-- \n  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n  \n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation; either\n  version 2.1 of the License, or any later version.\n  \n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  \n  You should have received a copy of the GNU Lesser General Public\n  License along with this library; if not, write to the Free Software\n  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n  USA\n -->\n\n<div #osd class=\"full-height\">\n</div>","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { Component, ElementRef, Inject, OnInit } from '@angular/core';\nimport { ComponentContainer } from 'golden-layout';\nimport { BaseComponentDirective } from '../golden-layout/base-component.directive';\n\n@Component({\n  selector: 'app-test-component',\n  templateUrl: './test-component.component.html',\n  styleUrls: ['./test-component.component.scss']\n})\nexport class TestComponentComponent extends BaseComponentDirective {\n  constructor(\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer,\n    elRef: ElementRef,\n  ) {\n    super(elRef.nativeElement);\n  }\n}\n","<!-- \n  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n  \n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation; either\n  version 2.1 of the License, or any later version.\n  \n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  \n  You should have received a copy of the GNU Lesser General Public\n  License along with this library; if not, write to the Free Software\n  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n  USA\n -->\n\n<p>test-component works!</p>\n","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { AfterViewInit, Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';\nimport * as bootstrap from 'bootstrap';\nimport { BehaviorSubject, combineLatest, forkJoin, NEVER, Observable } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\n\nexport interface TreeViewItem {\n  id: string,\n  label: string;\n  children: string[];\n  link?: string;\n}\n\nconst EMPTY_TREE_VIEW_ITEM: TreeViewItem = { id: '', label: '', children: [] };\n\nexport interface TreeViewProvider {\n  getItem: (id: string) => Observable<TreeViewItem>;\n}\n\n@Component({\n  selector: 'app-tree-view',\n  templateUrl: './tree-view.component.html',\n  styleUrls: ['./tree-view.component.scss']\n})\nexport class TreeViewComponent implements AfterViewInit {\n  @ViewChild('childrenContainer', { static: true }) editorContainer!: ElementRef;\n  childrenCollapsible!: bootstrap.Collapse;\n  opened = false;\n\n  @Output() itemClicked = new EventEmitter<string>()\n  \n  private _model: TreeViewItem = EMPTY_TREE_VIEW_ITEM;\n  @Input() set model(v: TreeViewItem) {\n    this._model = v;\n    this.modelChange.next(this._model);\n\n  }\n  get model() { return this._model; }\n  modelChange = new BehaviorSubject<TreeViewItem>(this._model);\n\n\n  private _dataProvider: TreeViewProvider = { getItem: (_) => NEVER };\n  dataProviderChange = new BehaviorSubject<TreeViewProvider>(this._dataProvider);\n  @Input() set dataProvider(v: TreeViewProvider) {\n    this._dataProvider = v\n    this.dataProviderChange.next(this._dataProvider);\n\n  }\n  get dataProvider() { return this._dataProvider; }\n\n  childrenLoaded = new BehaviorSubject<boolean>(false);\n\n  children =\n    combineLatest([\n      this.dataProviderChange,\n      this.modelChange,\n    ]).pipe(\n      map(([{ getItem }, { children }]) => children.map(getItem)),\n      switchMap((x) => forkJoin(x)),\n      tap(() => this.childrenLoaded.next(true)),\n    )\n    ;\n\n  ngAfterViewInit() {\n    this.childrenCollapsible = new bootstrap.Collapse(this.editorContainer.nativeElement, { toggle: false });\n    this.childrenCollapsible.hide();\n\n  }\n\n  toggle() {\n    if (!!this.model && this.model.children.length > 0) {\n      this.childrenCollapsible.toggle();\n      this.opened = !this.opened;\n    }\n  }\n\n}\n","<!-- \n  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n  \n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation; either\n  version 2.1 of the License, or any later version.\n  \n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  \n  You should have received a copy of the GNU Lesser General Public\n  License along with this library; if not, write to the Free Software\n  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n  USA\n -->\n\n<div class=\"pointer\" >\n    <i (click)=\"toggle()\" [class.opened]=\"opened\" *ngIf=\"model.children.length > 0\" class=\"bi bi-chevron-right arrow-right\"></i>\n    <a *ngIf=\"model.link !== undefined\" class=\"pointer ml-3\" [routerLink]=\"model.link\">\n        <i class=\"bi bi-pencil\"></i>\n    </a>\n    <span (click)=\"itemClicked.next(model.id);toggle()\"> {{model.label }}</span>\n    \n</div>\n<span *ngIf=\"opened && !(childrenLoaded | async)\" class=\"spinner-border\" role=\"status\"></span>\n<div class=\"tree-childeren-container collapse\" #childrenContainer>\n    <app-tree-view *ngFor=\"let i of children | async\" [model]=\"i\" [dataProvider]=\"this.dataProvider\">\n    </app-tree-view>\n</div>\n\n<ng-template #loading>\n    <div>Loading…</div>\n</ng-template>","import { Component, Input } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { never, NEVER, Observable, Subject } from 'rxjs';\nimport { TreeViewItem } from 'src/app/components/tree-view/tree-view.component';\n\n@Component({\n  selector: 'app-layout',\n  templateUrl: './layout.component.html',\n  styleUrls: ['./layout.component.scss']\n})\nexport class LayoutComponent {\n  @Input() showNavbar = true;\n  @Input() breadCrumbs: { link: string, label: string }[] = [];\n  openTextTree$ = new Subject<any>();\n\n  @Input() treeItems: Observable<TreeViewItem[]> = NEVER;\n  @Input() treeProvider: { getItem: (id: string) => Observable<TreeViewItem> } = { getItem: (_) => NEVER };\n\n  constructor(\n  ) {\n  }\n\n  login(url:string) {\n    \n  }\n\n}\n\n","<nav class=\"navbar navbar-dark bg-dark\">\n    <div class=\"container-fluid\">\n        <span class=\"navbar-brand mb-0 h1\">CophiEditor</span>\n        <div *ngIf=\"showNavbar\">\n            <button class=\"btn btn-light btn-sm rounded-circle m-1 rotate-180\" (click)=\"openTextTree$.next()\">\n                <i class=\"bi bi-layout-sidebar\"></i>\n            </button>\n            <!-- <button class=\"btn btn-light btn-sm rounded-circle m-1\">\n                <i class=\"bi bi-bell\"></i>\n            </button>\n            <button class=\"btn btn-light btn-sm rounded-circle m-1\">\n                <i class=\"bi bi-list\"></i>\n            </button>\n            <button class=\"btn btn-light btn-sm rounded-circle m-1\">\n                <i class=\"bi bi-person\"></i>\n            </button> -->\n        </div>\n    </div>\n</nav>\n<nav *ngIf=\"breadCrumbs.length > 0\" aria-label=\"breadcrumb\">\n    <ol class=\"breadcrumb m-0 p-2\">\n        <li *ngFor=\"let b of breadCrumbs; let last = last\" class=\"breadcrumb-item\" [class.active]=\"last\">\n            <a *ngIf=\"!last\" [routerLink]=\"b.link\">{{b.label}}</a>\n            <ng-container *ngIf=\"last\">{{b.label}}</ng-container>\n        </li>\n    </ol>\n</nav>\n\n<ng-content></ng-content>\n\n<app-offcanvas #offcanvas [header]=\"'Working Unit'\" position=\"end\" [openEvents]=\"openTextTree$\">\n    <app-tree-view *ngFor=\"let i of treeItems | async\" [model]=\"i\" [dataProvider]=\"treeProvider\"></app-tree-view>\n</app-offcanvas>\n\n<footer class=\"bg-light text-center text-lg-start\">\n    <div class=\"text-center p-2\">\n        © 2021 Copyright: CophiLab\n        <!-- TODO -->\n    </div>\n</footer>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-login-page',\n  templateUrl: './login-page.component.html',\n  styleUrls: ['./login-page.component.scss']\n})\nexport class LoginPageComponent {\n\n  loginServices = [\n    { label: 'Shibbolet', link: '/working-units', icon: \"bi-door-open\" },\n    { label: 'Google', link: '/working-units', icon: \"bi-google\" },\n  ]\n  constructor(\n    public router: Router,\n  ) {\n  }\n\n\n}\n","<app-layout [showNavbar]=\"false\">\n\n    <form class=\"container w-25 mt-4 mb-4\">\n        <div class=\"d-flex flex-row align-items-center justify-content-center justify-content-lg-start\">\n            <p class=\"lead fw-normal mb-0 me-3\">Sign in with</p>\n            <button *ngFor=\"let s of loginServices\" type=\"button\" (click)=\"router.navigateByUrl(s.link)\"\n                class=\"btn btn-primary btn-floating mx-1\">\n                {{s.label}}\n                <i [ngClass]=\"['bi', s.icon]\"></i>\n            </button>\n        </div>\n\n        <div class=\"divider d-flex align-items-center my-4\">\n            <p class=\"text-center fw-bold mx-3 mb-0\">Or</p>\n        </div>\n\n        <!-- Email input -->\n        <div class=\"form-outline mb-4\">\n            <input type=\"email\" id=\"form3Example3\" class=\"form-control form-control-lg\"\n                placeholder=\"Enter a valid email address\" />\n            <label class=\"form-label\" for=\"form3Example3\">Email address</label>\n        </div>\n\n        <!-- Password input -->\n        <div class=\"form-outline mb-3\">\n            <input type=\"password\" id=\"form3Example4\" class=\"form-control form-control-lg\"\n                placeholder=\"Enter password\" />\n            <label class=\"form-label\" for=\"form3Example4\">Password</label>\n        </div>\n\n        <div class=\"d-flex justify-content-between align-items-center\">\n            <!-- Checkbox -->\n            <div class=\"form-check mb-0\">\n                <input class=\"form-check-input me-2\" type=\"checkbox\" value=\"\" id=\"form2Example3\" />\n                <label class=\"form-check-label\" for=\"form2Example3\">\n                    Remember me\n                </label>\n            </div>\n            <a href=\"#!\" class=\"text-body\">Forgot password?</a>\n        </div>\n\n        <div class=\"text-center text-lg-start mt-4 pt-2\">\n            <button type=\"button\" class=\"btn btn-primary btn-lg\" (click)=\"router.navigateByUrl('/working-units')\"\n                style=\"padding-left: 2.5rem; padding-right: 2.5rem;\">Login</button>\n            <p class=\"small fw-bold mt-2 pt-1 mb-0\">Don't have an account? <a href=\"#!\" class=\"link-danger\">Register</a>\n            </p>\n        </div>\n\n    </form>\n</app-layout>","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NEVER, Observable, of, Subject } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { GoldenLayoutHostComponent } from 'src/app/components/golden-layout/golden-layout-host/golden-layout-host.component';\nimport { OsdComponent } from 'src/app/components/osd/osd.component';\nimport { TreeViewItem } from 'src/app/components/tree-view/tree-view.component';\nimport { MockDataService } from 'src/app/services/mock-data.service';\n\n@Component({\n  selector: 'app-test-page',\n  templateUrl: './test-page.component.html',\n  styleUrls: ['./test-page.component.scss']\n})\nexport class TestPageComponent {\n\n\n  treeItems = of(this.mockDB.rootElements()).pipe(\n    map((x) => x.map(({ id, label, children }) => ({ id, label, children } as TreeViewItem))),\n  );\n\n  treeProvider: { getItem: (id: string) => Observable<TreeViewItem> } = {\n    getItem: (id: string) => {\n      const di = this.mockDB.item(id);\n      if (di === undefined) {\n        return NEVER;\n      }\n      return of({ label: di.label, children: di.children } as TreeViewItem);\n    }\n  }\n\n\n  @ViewChild(GoldenLayoutHostComponent, { static: true })\n  lc!: GoldenLayoutHostComponent;\n\n  constructor(\n    private mockDB: MockDataService,\n  ) {\n  }\n\n\n  addOSD() {\n    this.lc.addComponent$.next([OsdComponent.name, { title: \"OSD\" }]);\n  }\n\n}\n","<app-layout [treeItems]=\"treeItems\" [treeProvider]=\"treeProvider\">\n\n    <button (click)=\"lc.saveLayout$.next()\">Save Layout</button>\n    <button (click)=\"lc.loadLayout$.next()\">Load Layout</button>\n\n    <button (click)=\"addOSD()\">OSD</button>\n\n    <div class=\"w-100 p-0 m-0 h-75\">\n        <app-golden-layout-host></app-golden-layout-host>\n    </div>\n\n    \n</app-layout>","import { JsonpClientBackend } from '@angular/common/http';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { CoherenceCheck } from 'cophi-lang';\nimport { combineLatest, forkJoin, NEVER, Observable, of, Subject } from 'rxjs';\nimport { map, switchMap, takeUntil, tap, withLatestFrom } from 'rxjs/operators';\nimport { GoldenLayoutHostComponent } from 'src/app/components/golden-layout/golden-layout-host/golden-layout-host.component';\nimport { MonacoEditorComponent } from 'src/app/components/monaco-editor/monaco-editor.component';\nimport { OsdComponent } from 'src/app/components/osd/osd.component';\nimport { TreeViewItem } from 'src/app/components/tree-view/tree-view.component';\nimport { LanguagesService } from 'src/app/services/languages.service';\nimport { DSLInfo, MockDataService } from 'src/app/services/mock-data.service';\nimport { environment } from 'src/environments/environment';\n\nfunction checkerCodes(cs: CoherenceCheck, cmps: MonacoEditorComponent[]) {\n  const tt = checkerTuples(cs.languages, cmps.filter((x) => cs.languages.includes(x.lang)));\n  const w = tt.map((components) => {\n    const code = JSON.stringify(components.map(({ lang, code }) => ({ lang, code })));\n    return {\n      code,\n      components,\n    }\n  });\n\n  return w;\n\n}\n\n// TODO: test function\nfunction checkerTuples(langs: string[], cmps: MonacoEditorComponent[]): MonacoEditorComponent[][] { // Assuming all languages are different\n  if (langs.length === 0) { return []; }\n\n  const [l, ...tail] = langs;\n  const choice = cmps.find((x) => x.lang === l);\n\n  if (choice === undefined) { return []; }\n\n  const rest = cmps.filter((x) => x !== choice && tail.includes(x.lang));\n  if (rest.length === 0) {\n    return [[choice]];\n  }\n  const x = checkerTuples(tail, rest);\n  const b = x.map((k) => [choice, ...k]);\n  return checkerTuples(tail, rest).map((k) => [choice, ...k]);\n}\n\n\n@Component({\n  selector: 'app-working-unit',\n  templateUrl: './working-unit.component.html',\n  styleUrls: ['./working-unit.component.scss']\n})\nexport class WorkingUnitComponent implements OnInit, OnDestroy {\n\n  id!: string | null;\n  private destroy = new Subject();\n  viewInit = new Subject();\n\n  breadCrumbs = this.route.paramMap.pipe(\n    map((m) => m.get('id')),\n    map((id) => this.db.path(id)),\n    map((p) => p.map(({ id, label }) => ({ link: `/working-unit/${id}`, label }))),\n  );\n\n  components = this.route.paramMap.pipe(\n    map((m) => m.get('id')),\n    map((id) => this.db.components(id)),\n    takeUntil(this.destroy),\n  )\n\n  componentsCmd = this.viewInit.pipe(\n    switchMap(() => this.components),\n    map(({ components }) => {\n      this.lc.clear();\n\n      const editors = components.map((c) => this.lc.add(c.componentName, { ...c }).instance)\n        .filter((c) => c instanceof MonacoEditorComponent)\n        .map((c) => (c as MonacoEditorComponent))\n\n      return editors;\n    }),\n  );\n\n  editors = new Subject<MonacoEditorComponent[]>();\n\n  checkers = this.components.pipe(\n    map(({ components }) => {\n      const langs = (components as DSLInfo[])\n        .filter(({ lang }) => lang !== undefined)\n        .map(({ lang }) => lang)\n        ;\n\n      return this.langService.checkers(langs);\n    }),\n  );\n\n  check = new Subject();\n\n  codes = this.componentsCmd.pipe(\n    map((cs) => cs.map((c) => c.codeChange)),\n  )\n\n\n\n  a = this.check.pipe(\n    withLatestFrom(combineLatest([this.checkers]))\n  )\n\n  checkCmd = this.check.pipe(\n    withLatestFrom(combineLatest([this.checkers, this.componentsCmd, this.a])),\n    tap(([_, [cs, cmps]]) => cs.forEach((c) =>\n      checkerCodes(c, cmps).forEach(({ code, components }) =>\n        c.warnings(code)\n          .then((warns) => components.forEach((k) => k.warningsInput.next(warns))))\n    )),\n    takeUntil(this.destroy),\n  )\n\n  treeItems = of(this.db.rootElements()).pipe(\n    map((x) => x.map(({ id, label, children }) => ({ id, label, children, link: `/working-unit/${id}` } as TreeViewItem))),\n  );\n\n  treeProvider: { getItem: (id: string) => Observable<TreeViewItem> } = {\n    getItem: (id: string) => {\n      const di = this.db.item(id);\n      if (di === undefined) {\n        return NEVER;\n      }\n      return of({ label: di.label, children: di.children, link: `/working-unit/${di.id}` } as TreeViewItem);\n    }\n  }\n\n  lc!: GoldenLayoutHostComponent;\n\n  constructor(\n    public route: ActivatedRoute,\n    private langService: LanguagesService,\n    public db: MockDataService,\n  ) {\n    this.componentsCmd.subscribe();\n    this.checkCmd.subscribe();\n    this.a.subscribe();\n\n    if (environment.production) {\n      console.log(\"INPROD!\")\n    }else {\n      console.log(\"NOT\")\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy.next();\n  }\n\n  ngOnInit() {\n    this.id = this.route.snapshot.paramMap.get('id');\n  }\n\n  addOSD() {\n    this.lc.addComponent$.next([OsdComponent.name, { manifestURL: 'https://www.e-codices.unifr.ch/metadata/iiif/ubb-M-I-0018/manifest.json' }]);\n  }\n\n  fullScreen(container: HTMLElement) {\n    if (!document.fullscreenElement) {\n      container.requestFullscreen();\n    }\n  }\n}\n","<app-layout [breadCrumbs]=\"(breadCrumbs | async) || []\" [treeItems]=\"treeItems\" [treeProvider]=\"treeProvider\">\n    <ng-container *ngIf=\"(components | async) as cs\">\n\n        <button class=\"btn btn-sm btn-secondary m-2 rounded-circle\" (click)=\"addOSD()\">\n            <i class=\"bi bi-image\"></i>\n        </button>\n        <button class=\"btn btn-sm btn-secondary m-2 rounded-circle\" (click)=\"fullScreen(container)\">\n            <i class=\"bi bi-arrows-fullscreen\"></i>\n        </button>\n        <button class=\"btn btn-sm btn-secondary m-2 rounded-circle\" (click)=\"check.next()\">\n            <i class=\"bi bi-eyeglasses\"></i>\n        </button>\n        <div class=\"w-100 p-0 m-0 h-75\" #container>\n            <app-golden-layout-host (ready)=\"lc = $event;viewInit.next()\"></app-golden-layout-host>\n        </div>\n    </ng-container>\n</app-layout>","import { Component, OnInit } from '@angular/core';\nimport { of, Observable, NEVER } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { TreeViewItem } from 'src/app/components/tree-view/tree-view.component';\nimport { MockDataService } from 'src/app/services/mock-data.service';\n\n@Component({\n  selector: 'app-working-units',\n  templateUrl: './working-units.component.html',\n  styleUrls: ['./working-units.component.scss']\n})\nexport class WorkingUnitsComponent implements OnInit {\n\n  units = [\n    { label: 'Col64', id: '64' },\n    { label: 'Col65', id: '65' },\n    { label: 'Col66', id: '66' },\n    { label: 'Col67', id: '67' },\n    { label: 'Col68', id: '68' },\n    { label: 'Col69', id: '69' },\n  ];\n\n  /*\n      localhost/working-unit/:id\n\n      nella view\n\n      path: (id: string) => []string\n\n      components: (id:string) => []{ componentName: string, state: any, layout: GoldenLayoutConfiguration }\n\n      \n  */\n\n      treeItems = of(this.db.rootElements()).pipe(\n        map((x) => x.map(({ id, label, children }) => ({ id, label, children, link: `/working-unit/${id}` } as TreeViewItem))),\n      );\n    \n      treeProvider: { getItem: (id: string) => Observable<TreeViewItem> } = {\n        getItem: (id: string) => {\n          const di = this.db.item(id);\n          if (di === undefined) {\n            return NEVER;\n          }\n          return of({ label: di.label, children: di.children, link: `/working-unit/${di.id}` } as TreeViewItem);\n        }\n      }\n\n  constructor(\n    private db: MockDataService,\n  ) {\n  }\n\n  ngOnInit(): void {\n  }\n\n}\n","<app-layout>\n    <div class=\"container p-4\">\n        <app-tree-view *ngFor=\"let i of treeItems | async\" [model]=\"i\" [dataProvider]=\"treeProvider\"></app-tree-view>\n    </div>\n</app-layout>","/// <reference path=\"../../../node_modules/monaco-editor/monaco.d.ts\" />\nimport { Injectable } from '@angular/core';\nimport { CoherenceCheck, Language, Warning } from 'cophi-lang';\nimport { GsLiterary } from 'gs-lit';\nimport { GsLiteraryApp } from 'gs-lit-app';\n\nimport { Subject } from 'rxjs';\n\nfunction toLanguageDefinition(l: Language, id: string): LanguageDefinition { // TODO: use only Language\n  return {\n    id, // TODO: change cophi-lang definition\n    syntaxHighlighter: l.highlighter,\n    completionProvider: (model, position) => { // TODO: replace with actual completion provider\n      var word = model.getWordUntilPosition(position);\n      var range = {\n        startLineNumber: position.lineNumber,\n        endLineNumber: position.lineNumber,\n        startColumn: word.startColumn,\n        endColumn: word.endColumn\n      };\n      return {\n        suggestions: [{\n          label: 'Sudhaus',\n          kind: monaco.languages.CompletionItemKind.Function,\n          documentation: 'The editor Sudhaus',\n          insertText: 'Sudhaus',\n          range: range\n        },\n        {\n          label: 'Cirillo',\n          kind: monaco.languages.CompletionItemKind.Text,\n          documentation: 'The editor Cirillo',\n          insertText: 'Cirillo',\n          range: range\n        },\n        ],\n      }\n    },\n    errorProvider: (model) => {\n      return l.errors(model.getValue())\n        .then((errs) => errs.map(({ message, range }) => (\n          {\n            code: model.uri.toString(),\n            startLineNumber: range.start.line,\n            startColumn: range.start.column,\n            endLineNumber: range.end.line,\n            endColumn: range.end.column,\n            message: message,\n            severity: monaco.MarkerSeverity.Error\n          } as monaco.editor.IMarkerData\n        ),\n        ));\n    }\n  }\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LanguagesService {\n\n  cks = Object.values(coherenceChecks)\n\n  checkers(langs: string[]): CoherenceCheck[] {\n    return this.cks.filter((c) => c.languages.every((l) => langs.includes(l)));\n  }\n\n  registerLanguage(lang: LanguageDefinition, editorModelChange: Subject<ModelChangeEvent>): monaco.IDisposable[] {\n    if (monaco.languages.getLanguages().some((x) => x.id === lang.id)) { return []; }\n\n    monaco.languages.register({ id: lang.id });\n    return [ // TODO check if we need to dispose this in case of multiple editor with the same language\n\n      // TODO: test custom tokenizer using ANTLR\n      // monaco.languages.setTokensProvider(lang.id, {\n      //   getInitialState() {\n      //     return new State('');\n      //   },\n      //   tokenize(line, startState) {\n      //     const { tokens, state } = tokenizer.getLineTokens(line, startState.state);\n      //     let offset = 0;\n\n      //     const monacoTokens = tokens.map((token) => {\n      //       const tok = {\n      //         startIndex: offset,\n      //         scopes: token.type,\n      //       };\n\n      //       offset += token.value.length;\n\n      //       return tok;\n      //     });\n\n      //     return {\n      //       endState: new State(state),\n      //       tokens: monacoTokens,\n      //     };\n      //   }\n      // }),\n\n      monaco.languages.setMonarchTokensProvider(lang.id, lang.syntaxHighlighter),\n      monaco.languages.registerCompletionItemProvider(lang.id, { provideCompletionItems: lang.completionProvider }),\n      monaco.languages.onLanguage(lang.id, () => {\n        monaco.editor.onDidCreateModel((model) => {\n          if (model.getLanguageId() === lang.id) {\n            model.onDidChangeContent(() => editorModelChange.next({ model, lang }));\n          }\n        });\n      }),\n    ];\n\n\n\n  }\n}\n\nexport interface ModelChangeEvent {\n  model: monaco.editor.ITextModel;\n  lang: LanguageDefinition;\n}\n\nexport interface LanguageDefinition {\n  id: string;\n  syntaxHighlighter: monaco.languages.IMonarchLanguage | monaco.Thenable<monaco.languages.IMonarchLanguage>;\n  completionProvider: (model: monaco.editor.ITextModel, position: monaco.Position, context: monaco.languages.CompletionContext, token: monaco.CancellationToken) => monaco.languages.ProviderResult<monaco.languages.CompletionList>;\n  errorProvider: (model: monaco.editor.ITextModel) => Promise<monaco.editor.IMarkerData[]>;\n}\n\nexport const langData: Record<string, LanguageDefinition> = {\n  'gs-lit': toLanguageDefinition(new GsLiterary(\"https://6000.greekschools.eu\", \"443\"), 'gs-lit'),\n  'gs-lit-app': toLanguageDefinition(new GsLiteraryApp(\"https://6001.greekschools.eu\", \"443\"), 'gs-lit-app'),\n  'gs-diplomatic': toLanguageDefinition(new GsLiterary(\"https://6000.greekschools.eu\", \"443\"), 'gs-diplomatic'), // TODO: use correct language definition!\n  'gs-translation': toLanguageDefinition(new GsLiterary(\"https://6000.greekschools.eu\", \"443\"), 'gs-translation'),\n  'gs-paleographic-app': toLanguageDefinition(new GsLiterary(\"https://6000.greekschools.eu\", \"443\"), 'gs-paleographic-app'),\n}\n\nexport const coherenceChecks: Record<string, CoherenceCheck> = {\n  'equal-number-of-lines': {\n    id: 'equal-number-of-lines',\n    warnings: (code: string) => {//Promise < Warning[] >,\n      const codeObj = JSON.parse(code) as { code: string, lang: string }[];\n\n      const same = codeObj\n        .map((x) => x.code.split(\"\\n\").length)\n        .every((val: number, i: number, arr: number[]) => val === arr[0])\n        ;\n\n      return new Promise<Warning[]>((resolve) => {\n        if (same) {\n          resolve([]);\n          return;\n        }\n        resolve([\n          {\n            message: 'Diplomatic and literary transcription must have the same number of lines',\n            range: {\n              start: { line: 1, column: 1 },\n              end: { line: Infinity, column: 1 },\n            }\n          },\n        ]\n        )\n      })\n    },\n    languages: ['gs-lit', 'gs-diplomatic'],\n  },\n}","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { Injectable } from '@angular/core';\nimport { LayoutConfig } from 'golden-layout';\nimport { MonacoEditorComponent } from '../components/monaco-editor/monaco-editor.component';\nimport { OsdComponent } from '../components/osd/osd.component';\n\nexport class ComponentInfo {\n  componentName: string;\n  title: string;\n\n  constructor(\n    componentName: string,\n    title: string,\n  ) {\n    this.componentName = componentName;\n    this.title = title;\n  }\n}\n\nexport class DSLInfo extends ComponentInfo {\n  lang: string;\n  code: string;\n\n  constructor(dslId: string, content: string, title: string) {\n    super(MonacoEditorComponent.name, title);\n    this.lang = dslId;\n    this.code = content;\n  }\n}\n\nclass OSDInfo extends ComponentInfo {\n  manifestURL: string;\n  page: number;\n\n  constructor(manifestURL: string, title: string, page?: number) {\n    super(OsdComponent.name, title);\n    this.manifestURL = manifestURL;\n    this.page = page || 0;\n  }\n}\n\ninterface Data {\n  id: string;\n  label: string;\n  parent?: string;\n  children: string[];\n  component?: ComponentInfo;\n}\n\ninterface Map<T> { [key: string]: T; }\n\nfunction mapToArray<T>(m: Map<T>): T[] { return Object.values(m) };\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MockDataService {\n\n  private db: Map<Data> = {\n    'pherc-1004': {\n      id: 'pherc-1004',\n      label: 'PHerc. 1004',\n      children: ['1', '2', '3'],\n    },\n    '1': {\n      id: '1',\n      label: 'Col. 64',\n      parent: 'pherc-1004',\n      children: ['dip-64', 'lit-64', 'translation-64'],\n    },\n    '2': {\n      id: '2',\n      parent: 'PHERC',\n      label: 'Col. 65',\n      children: [],\n    },\n    '3': {\n      id: '3',\n      parent: 'PHERC',\n      label: 'Col. 66',\n      children: [],\n    },\n    'translation-64': {\n      id: 'translation-64',\n      label: 'Translation',\n      parent: '1',\n      component: new DSLInfo(\n        'gs-translation',\n        `(c. 20 linee e 2-3 parole mancanti) alle\ncose secondo opinione vera sembra esse-\nre opportuno paragonare ciò che è se-\ncondo vana opinione, ossia ciò che non\nha relazione con le evidenze, e (sembra)\nche i retori non padroneggino assoluta-\nmente nemmeno queste cose. Cionondi-\nmeno, nel trattare la materia, invano\nsembra addurre [analogie prese in presti-\nto] dall’arte musicale; le cose, infatti,\nnon sarebbero state più chiare lasciando\ncosì come sono (?) quelle intorno alle\nquali faceva i [suoi] ragionamenti; ma,\n[da una parte], queste cose [sono per na-\ntura] facilmente comprensibili a tutti,\n[dall’altra, rispetto] alla vita (c. 1-2 pa-\nrole e 1 linea mancanti)`,\n        'Translation'),\n      children: [],\n    },\n    'paleographic-app-64': {\n      id: 'paleographic-app-64',\n      label: 'Paleographic Apparatus',\n      parent: 'dip-64',\n      component: new DSLInfo(\n        'gs-paleographic-app',\n//         `Col. 64 PHerc. 1004, cr. 5, pz. 1, col. 6 = O Cb (2, \n// 446) = N col. 6 = VH2 III 117 = col. 6 Sudhaus\n// 1 ][ subter lineam vert. apicata sicut ρ, φ, ψ 2 \n// ]η̣[]ι inf. desc., inf. vest. ⌈τατ⌉ N: [ vert. P: ⌈ατ⌉\n// O (τ, γ) 3 ]ξ dext. arcus ⌈α⌉ N:  (α, λ) P 4 \n// ⌈ν⌉ N: [P] 5 ⌈ sup. vest., (ε, θ, ο, ϲ) ⌈ιναι⌉ N: \n// ] inf. arcus, (α, λ, δ, ν), sup. vert. ⌈ν⌉ O: [PN] \n// οα̣ (ξ, ζ, π, τ), inf. vest. 6 υποκωφον̣ηνου[]η\n// punctis suprascriptis del. librarius ⌈τ⌉ ON:  (τ, φ) P \n// 7 αε (τ, γ) 8 ⌈α⌉ Npc:  (α, λ) P: µ̣ Nac ⟦⟧ (ε, θ, \n// ο, ϲ) ⌈ι⌉ N:  sup. vest. P 9 ϲ (α, λ, δ) ⌈α̣⌉ N: \n// desc. P ⌉[ vest. 11 pars sinistra diples \n// obelismenes dispicitur α̣ε subter lin. vert., inf. \n// vest. 13 ⌈ρο⌉ N:  sup. arcus sicut ρ, β, (ο, θ, ϲ, ε) \n// P ][ (µ, ω) 14 ⌈εν⌉ N:  (ε, θ, ο, ϲ), (ν, λι, αι, \n// δι) ιε (κ, χ) 15 π (α, λ, δ) ⌈ε⌉ N:  sup. et \n// med. vest. P 16 φ̣[ sin. asc. sicut α, λ, χ, inf. \n// vert. 17 ω̣(ρ, γ, τ) ⌈κ⌉ N:  (κ, χ) τ⌈ (α, λ, δ) \n// ⌈λε⌉ O: [ (λ, α, χ, κ, ιϲ) P: [N] 18 ω (π, τ) ι[\n// (ε, θ), inf. vert. 19 λο⌈ (ο, ε), (γ, τ), sup. vest. \n// ⌈ϲα⌉ N:  (ϲ, ε, θ, ο), (α, λ) P ⌈αυτα⌉ O: [ (α, λ), \n// inf. vest. P: α[ N ⌉ sin. sup. desc., sup. horiz., \n// desc. υτα \n// -1\n//  20 ο̣θ inf. vest. η \n// -1\n//  21 [\n// sup. horiz., sup. vest., sup. arcus vel horiz. ⌈⌉ sin. \n// arcus: [PN] 22 ][ sup. vest., desc. ] sup. \n// vest., (α, λ, δ), sup. vest. 23 ][ sup. vert., (ε, ϲ), \n// sup. vert.`\n`Col. 64 PHerc. 1004, cr. 5, pz. 1, col. 6 = O Cb (2, 446) = N col. 6 = VH2 III 117 = col. 6 Sudhaus\n\n1 ][ subter lineam vert. apicata sicut ρ, φ, ψ \n2 ]η̣[]ι inf. desc., inf. vest. ⌈τατ⌉ N: [ vert. P: ⌈ατ⌉ O (τ, γ) \n3 ]ξ dext. arcus ⌈α⌉ N:  (α, λ) P \n4 ⌈ν⌉ N: [P] \n5 ⌈ sup. vest., (ε, θ, ο, ϲ) ⌈ιναι⌉ N: ] inf. arcus, (α, λ, δ, ν), sup. vert. ⌈ν⌉ O: [PN] οα̣ (ξ, ζ, π, τ), inf. vest. \n6 υποκωφον̣ηνου[]η punctis suprascriptis del. librarius ⌈τ⌉ ON:  (τ, φ) P \n7 αε (τ, γ) \n8 ⌈α⌉ Npc:  (α, λ) P: µ̣ Nac ⟦⟧ (ε, θ, ο, ϲ) ⌈ι⌉ N:  sup. vest. P \n9 ϲ (α, λ, δ) ⌈α̣⌉ N:  desc. P ⌉[ vest. \n11 pars sinistra diples obelismenes dispicitur α̣ε subter lin. vert., inf. vest. \n13 ⌈ρο⌉ N:  sup. arcus sicut ρ, β, (ο, θ, ϲ, ε) P ][ (µ, ω) \n14 ⌈εν⌉ N:  (ε, θ, ο, ϲ), (ν, λι, αι, δι) ιε (κ, χ) \n15 π (α, λ, δ) ⌈ε⌉ N:  sup. et med. vest. P \n16 φ̣[ sin. asc. sicut α, λ, χ, inf. vert. \n17 ω̣(ρ, γ, τ) ⌈κ⌉ N:  (κ, χ) τ⌈ (α, λ, δ) ⌈λε⌉ O: [ (λ, α, χ, κ, ιϲ) P: [N] \n18 ω (π, τ) ι[(ε, θ), inf. vert. \n19 λο⌈ (ο, ε), (γ, τ), sup. vest. ⌈ϲα⌉ N:  (ϲ, ε, θ, ο), (α, λ) P ⌈αυτα⌉ O: [ (α, λ), inf. vest. P: α[ N ⌉ sin. sup. desc., sup. horiz., desc. υτα -1\n20 ο̣θ inf. vest. η -1\n21 [sup. horiz., sup. vest., sup. arcus vel horiz. ⌈⌉ sin. arcus: [PN] \n22 ][ sup. vest., desc. ] sup. vest., (α, λ, δ), sup. vest. \n23 ][ sup. vert., (ε, ϲ), sup. vert.`\n, 'Paleographic Apparatus'),\n      children: [],\n    },\n    'dip-64': {\n      id: 'dip-64',\n      label: 'Diplomatic Transcription',\n      parent: '1',\n      component: new DSLInfo(\n        'gs-diplomatic',\n        `   Col. 64\n    desunt versus fere 19\n    ()][()\n    ]η̣[]ι⌈τατ⌉ω̣νκ̣ατα̣\n    ]ξαν̣αλη̣θηφ⌈α⌉ινε̣\n    τειναιπροςηκονα⌈ν⌉τ̣ι\n5 ⌈ιναι⌉τακατα⸌ματα̣ια⌈ν⌉⸍δοα̣\n    ⟦υποκωφον̣ηνου⌈τ⌉η⟧\n    ταεμητηναν̣αφ[\n    ρ̣⌈α⌉νεπιταςεν⟦⟧⸌α⸍⌈ι⌉[()\n    ςλαμβ̣ανον̣τακ̣⌈α̣⌉[()\n10 δ̣ετουτωντελεωςε[\n    κ̣α̣ειντουςρητο̣ρα̣[ \n    α̣λλαμηνεντωικατ̣[\n    ς̣κευαζειντοπ̣⌈ρο⌉κ[()][\n    νονπρος̣ουθ⌈εν⌉ε̣οιεν̣\n15 ποτηςμουςικης⌈ε⌉\n    παγεινουγ̣αρηνφ̣[\n    ω̣τερατα⌈κ⌉αταυτ⌈λε⌉[]\n    ωνυπερωνεπ̣οι\n    ]υςλο⌈ςα⌉λλατ⌈αυτα⌉\n20 ()]νευπ̣αρα̣κολο̣θη̣\n    []ςινοντ̣απε⌈⌉[\n    ][]β̣ιονεκε[][\n23 ]ε̣[][()`,\n        'Diplomatic Transcription'),\n      children: ['paleographic-app-64'],\n    },\n    'literary-app-64': {\n      id: 'literary-app-64',\n      label: 'Literary Apparatus',\n      parent: 'lit-64',\n      component: new DSLInfo(\n        'gs-lit-app',\n        `Col. 64\n3-8 Sudhaus \n6 ⟦ὑπόκωφον ἦν οὐτ’ η⟧ del. librarius \n7 τά γ̣ε Fiorillo: τά τ̣ε Armstrong \n9-10 [µη]|δέ Sudhaus: [οὐ]|δέ Blank \n10-11 ἐ[πι]|κ{α}ρ̣‹α›τ̣εῖν *: ἐ[ᾶι] | κάπ̣τ̣ειν Henry: ἐ[ᾶι] | κρ̣α̣τ̣εῖν Blank, cetera Cirillo \n12-16 Cirillo \n17-18 λε[ί]|π̣ων *: λέ|[γ]ων Sudhaus \n18 ἐποίε̣ι̣ *: ἐποιε[ῖ]τ’ Sudhaus) \n19 CirilloCpc \n20 Sudhaus \n21 πέφ[υκε Sudhaus: πέφ[ηνε Janko, cetera Sudhaus \n23 πρὸ]ϲ̣ δ̣[έ] *, cetera Sudhaus        \n        `, 'Literary Apparatus'),\n      children: [],\n    },\n    'lit-64': {\n      id: 'lit-64',\n      label: 'Literary Transcription',\n      parent: '1',\n      component: new DSLInfo(\n        'gs-lit',\n        `    Col. 64\n    desunt versus fere 19\n    ․․․․․․․․․․․₍․₎]․[․․․․₍․₎ \n    ․․]․ η[․]․ ιτα τῶν κατὰ\n    δ]ό̣ξαν ἀληθῆ φαίνε-\n    τ’ εἶναι προςῆκον ἀντι-\n5  θ̣ε̣ῖναι τὰ κατὰ ματαίαν δόξ̣αν̣,\n7  τά γ̣ε μὴ τὴν ἀναφ[ο-\n    ρὰν ἐπὶ τὰς ἐναρ͙[γεί-\n    α̣ς λαμβάνοντα, καὶ̣[μη-\n10 δὲ τούτων τελέως ἐ[πι-\n    κ{α}ρ̣‹α›τ̣εῖν τοὺς ῥήτορα[ς.\n\n    ἀλλὰ μὴν ἐν τῶι κατ[α-\n    ϲκευάζειν τὸ προκ[εί]μ[ε-\n    νον πρὸς οὐθὲν ἔοικ̣εν\n15 ἀ̣πὸ τῆς μουϲικῆς ἐ-\n    πάγειν· οὐ γὰρ ἦν φα̣ν̣[ε-\n    ρ̣ώτερα τὰ κατ’ αὐτὰ̣ λε[ί-\n    π̣ων, ὑπὲρ ὧν ἐποίε̣ι̣\n    το]ὺς λό̣γ̣ου̣ς· ἀλλὰ ταῦτα\n20 μὲ]ν εὐπαρακολού̣θη-\n    τ̣α̣ π̣[ᾶ]ϲιν ὄντα πέφ[υκε,\n    πρὸ]ς δ[ὲ] βίον εκε[]․․․[․\n23 ․․․․․․]ε[․․]․․․[․․․․․₍․₎`,\n    'Literary Transcription'),\n      children: ['literary-app-64'],\n    },\n  };\n\n  rootElements() {\n    return mapToArray(this.db)\n      .filter((x) => x.parent === undefined);\n  }\n\n  path(id: string | null): Array<{ id: string, label: string }> {\n    if (!id) { return []; }\n    const { label, parent } = this.db[id] || {};\n    if (parent === undefined) { return [{ id, label }]; }\n    return [...this.path(parent), { id, label }];\n  }\n\n  components(id: string | null): { layout?: LayoutConfig, components: ComponentInfo[] } {\n    if (!id) { return { components: [] }; }\n\n    const d = this.db[id];\n    if (d === undefined) { return { components: [] }; }\n\n    const childrenComponents = d.children.map((c) => this.components(c))\n      .map(({ components }) => components)\n      .reduce((x, y) => [...x, ...y], [])\n      ;\n\n    const component = d.component !== undefined ? [d.component] : [];\n    return { components: [...component, ...childrenComponents] };\n  }\n\n  item(id: string) {\n    return this.db[id];\n  }\n\n}\n","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\n// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","/* \n *  CophiEditor UI: a collaborative DSL-based web platform for the creation of papyrological critical editions\n *  Copyright (C) 2021 Simone Zenzaro, ILC-CNR\n *  \n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or any later version.\n *  \n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *  \n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301\n *  USA\n */\n\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":["EventEmitter","bootstrap","BehaviorSubject","combineLatest","forkJoin","NEVER","map","switchMap","tap","i0","ctx_r7","ctx_r4","EMPTY_TREE_VIEW_ITEM","id","label","children","TreeViewComponent","constructor","_model","getItem","_","_dataProvider","dataProviderChange","modelChange","pipe","x","childrenLoaded","next","model","v","dataProvider","ngAfterViewInit","childrenCollapsible","Collapse","editorContainer","nativeElement","toggle","hide","length","opened","selectors","viewQuery","ctx","pipes","styles","Subject","ctx_r3","LayoutComponent","login","url","inputs","showNavbar","breadCrumbs","treeItems","treeProvider","ngContentSelectors","decls","vars","consts","template","of","takeUntil","withLatestFrom","MonacoEditorComponent","OsdComponent","environment","ctx_r5","ctx_r6","checkerCodes","cs","cmps","tt","checkerTuples","languages","filter","includes","lang","w","components","code","JSON","stringify","langs","l","tail","choice","find","undefined","rest","b","k","WorkingUnitComponent","route","langService","db","paramMap","m","get","path","p","link","destroy","viewInit","lc","clear","editors","c","add","componentName","Object","instance","checkers","componentsCmd","codeChange","check","a","forEach","warnings","then","warns","warningsInput","rootElements","di","item","subscribe","checkCmd","production","console","log","ngOnDestroy","ngOnInit","snapshot","addOSD","addComponent$","name","manifestURL","fullScreen","container","document","fullscreenElement","requestFullscreen","ctx_r0","WorkingUnitsComponent"],"sourceRoot":"webpack:///"}